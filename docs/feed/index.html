<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[Martin Hujer blog]]></title>
    <link href="https://blog.martinhujer.cz/feed/" rel="self"/>
    <link href="https://blog.martinhujer.cz/"/>
    <updated>2019-03-16T16:10:36+00:00</updated>
    <id>https://blog.martinhujer.cz/</id>
            <author>
            <name><![CDATA[Martin Hujer]]></name>                    </author>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[4 Tips for Faster Gitlab CI Builds for Symfony Applications]]></title>
            <link href="https://blog.martinhujer.cz/4-tips-for-faster-gitlab-ci-build-symfony-application/"/>
            <updated>2019-03-16T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/4-tips-for-faster-gitlab-ci-build-symfony-application/</id>
            <content type="html"><![CDATA[<blockquote>
  <p>Some of those tips are also applicable to non-Symfony applications and to non-Gitlab CI pipelines, so keep reading even if you are not using them.</p>
</blockquote>

<p>Waiting for a CI build to finish so can merge the feature is annoying, but it is still by an order of magnitude better than not having CI at all.</p>

<p>In this article I will show you some tips which I used in <a href="https://www.outdoorvisit.com/">OutdoorVisit</a> to make our CI build faster.</p>

<h1 id="tip-%231%3A-you-may-not-need-php-lint">Tip #1: You may not need PHP Lint</h1>

<p>Linting of PHP files can be done as easily as running <code>php -l myfile.php</code>. I've included PHP Lint as a part of the build since ever. At first, I was using <code>PhpLintTask</code> from Phing which checks each file separately. Later I switched to <a href="https://github.com/JakubOnderka/PHP-Parallel-Lint">PHP-Parallel-Lint</a> which checks multiple files in parallel.</p>

<p>Recently I noticed that our CI build is taking more time to run. It wasn't a glitch, we were just adding more and more files to the project. The PHP Lint <strong>was taking 31&nbsp;s</strong> of the build time although it ran 10 parallel checks. I couldn't remember the last time it discovered something, so I considered removing it completely. But it would open a risk of missing an error somewhere.</p>

<p>I took a different approach. When the Symfony compiles the DI container, it tries to load all the files and fails on syntax errors. At least when you have this configured in <code>config/services.yaml</code>:</p>

<pre><code class="yaml">services:
    App\:
        resource: '../src/*'
</code></pre>

<p>So instead of completely removing the PHP Lint, I just added <code>--exclude src</code> flag to the command, so it looks like this:</p>

<pre><code class="bash">parallel-lint -j 10 --exclude vendor --exclude var --exclude src .
</code></pre>

<p><strong>It helped me to cut 20&nbsp;s from the build time without risking anything!</strong></p>

<h1 id="tip-%232%3A-enable-php_codesniffer-cache-and-cache-it-between-builds">Tip #2: Enable PHP_CodeSniffer cache and cache it between builds</h1>

<p>PHP_CodeSniffer check can take quite a lot of time when there are many files to check. It used to take around 60&nbsp;s in our build. We also usually run it locally before pushing so the waiting was annoying.</p>

<p>Luckily, PHPCS has a built-in caching feature, which can be enabled by passing a command line argument: <code>--cache=./var/.phpcs-cache</code>. The cache-file path can be changed to anything else and you can also configure it as an option in your <code>phpcs.xml.dist</code> ruleset.</p>

<p><strong>This sped up our CS check from 60&nbsp;s to 3&nbsp;s!</strong></p>

<p>But it worked only locally, because the Gitlab CI and others like Bitbucket Pipelines create a new environment for each build. For Gitlab all you need to do is to add the path to <code>cache</code> section in <code>.gitlab-ci.yml</code> (We already had <code>vendor/</code> and <code>node_modules</code> there). Gitlab takes care of backing it up after the build and restoring it before the next build.</p>

<pre><code class="yaml">  cache:
    paths:
      - node_modules/
      - vendor/
      - var/.phpcs-cache  &lt;-- added the PHPCS cache here
</code></pre>

<h1 id="tip-%233%3A-run-symfony-tests-with-%60debug%3Dfalse%60">Tip #3: Run Symfony tests with <code>debug=false</code></h1>

<p>Apart from having a good number of unit tests, we also use some container tests and lots of controller tests for most of the frontend. They are slow (running against a database) but they are worth it because they detect tremendous number of issues and regressions.</p>

<p>When you are running your Symfony application in <code>dev</code> or <code>test</code> environment, cache freshness is automatically checked on each request and invalidated if necessary. The great thing is that you don't have to worry about it, and you will never be surprised by stale cache. In <code>prod</code> mode, cache is not invalidated automatically, and you must take care of it manually during deploy.</p>

<p>If you are running your whole test suite at once, there is no need to check the cache freshness before each test.</p>

<p>It can be done by changing <code>APP_DEBUG</code> flag in <code>phpunit.xml.dist</code> file to <code>0</code>:</p>

<pre><code class="xml">&lt;env name="APP_DEBUG" value="0" /&gt;
</code></pre>

<p>However, this solution is not perfect, because you will need to take care on invalidating the cache manually while you are developing. You can use this <a href="https://github.com/symfony/recipes/pull/530#issuecomment-467387200">custom <code>bootstrap.php</code> for tests</a> from Github.</p>

<p>I chose a different approach for our project and just changed the environment variable for CI builds in <code>.gitlab-ci.yml</code>:</p>

<pre><code class="yaml">variables:
  APP_DEBUG: 0
</code></pre>

<p>As it affects only the CI, running the tests locally does not benefit from this - but on the other hand I don't have to worry about properly invalidating the cache (and I'm usually running just a few tests locally anyway).</p>

<p><strong>This helped me to cut the tests running time in CI from 90 seconds to 53 seconds!</strong></p>

<h1 id="tip-%234%3A">Tip #4:</h1>

<p>If you have an application where you use NodeJS and npm just to compile assets such as CSS and JS, there is no need to stay on the very latest versions of the packages. However, because Webpack depends on lots of packages, npm will start spitting out messages like this during <code>npm install</code>:</p>

<pre><code class="text">audited 9438 packages in 16.958s
found 222 vulnerabilities (5 low, 213 moderate, 3 high, 1 critical)
</code></pre>

<p>As the JavaScript code installed through npm is never facing the hostile environment of the internet, those are not very scary. But they are unnecessarily cluttering the build output, so I decided to disable them. It can be done by adding <code>--no-audit</code> switch to <code>npm install</code></p>

<pre><code class="bash">npm install --no-audit
</code></pre>

<p>Apart from cleaning out the build output, it <strong>saved several seconds from the <code>npm install</code> run</strong> which is neat.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Do you know other tricks how to make the CI build faster? Please share them in comments!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Povinné ručení od České Pojišťovny - Jak ho zlevnit?]]></title>
            <link href="https://blog.martinhujer.cz/povinne-ruceni-ceska-pojistovna-zlevneni/"/>
            <updated>2019-03-12T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/povinne-ruceni-ceska-pojistovna-zlevneni/</id>
            <content type="html"><![CDATA[<p>Dlouhou dobu jsem měl <strong>povinné ručení u České Pojišťovny</strong> (dříve měli akci na přenos bonusu v rámci rodiny, což bylo dost výhodné). Každý rok mi přišel požadavek na zaplacení o trochu více než předchozí rok. Letos jsem se konečně rozhoupal prozkoumat, jestli nejde mít povinné ručení někde jinde levněji.</p>

<p>Jediný zajímavý parametr pro srovnání je <strong>limit pojistného plnění</strong>. Našel jsem tedy nějaký srovnávač povinných ručení a vyplnil údaje o autě podle stávající pojistné smlouvy. <strong>Pozor</strong>, pokud nechcete, aby vám někdo zkoušel vnutit pojištění a chcete ho jen srovnat, tak nezadávejte svoje telefonní číslo ani rodné číslo (Můžete použít třeba to z <a href="https://cs.wikipedia.org/wiki/Rodn%C3%A9_%C4%8D%C3%ADslo#Kontroln%C3%AD_%C4%8D%C3%ADslice">Wikipedie</a>).</p>

<p>Ve výsledcích mě překvapilo, že Česká Pojišťovna (ano, tam, kde mám stávající smlouvu) nabízí povinné ručení se stejnými limity plnění levněji, než po mě chtějí teď zaplatit.</p>

<p><em>A tím se dostáváme k tomu nejdůležitějšímu.</em></p>

<h2 id="%2A%2Ajak-sn%E3%AD%E5%BEit-cenu-povinn%E3%A9ho-ru%E4%8Den%E3%AD-u-%E4%9Cesk%E3%A9-poji%E5%A1%E5%A5ovny%3F%2A%2A"><strong>Jak snížit cenu povinného ručení u České Pojišťovny?</strong></h2>

<p>Abych ověřil, že to srovnávač počítá správně, <strong>spočítal jsem si povinné ručení přímo na webu České Pojišťovny</strong>. Tam jsem zadával reálné údaje, protože už je stejně mají. A pokud zadáte jméno a rodné číslo, tak to i správně načte bonus za dosavadní bezeškodní průběh.</p>

<p>Výsledkem bylo kalkulace níže, <strong>o osm set levnější</strong>, než 3 231 Kč, které bych platil podle stávající smlouvy.</p>

<p><img src="/data/2019/2019-03-12-povinne-ruceni-ceska-pojistovna-zlevneni/povinne-ruceni-kalkulace.png" alt="Kalkulace povinného ručení u České Pojišťovny" /></p>

<p>Tabulku jsem si vytisknul a měl jsem v plánu se stavit na pobočce Česká Pojišťovny, starou smlouvu vypovědět a uzavřít novou.</p>

<p>Ale než jsem se k tomu dostal, tak mi volali, že jsem nedokončil online objednávku pojištění. A kupodivu uměli, bez nějakého přesvědčování, tu starou smlouvu zrušit a udělat novou na částku z online kalkulačky, bez toho abych musel někam chodit.</p>

<p>Podklady pak poslali e-mailem a smlouva byla uzavřena tím, že jsem zaplatil pojistné.</p>

<h2 id="%2A%2Ana-co-si-d%E3%A1t-pozor-u-povinn%E3%A9ho-ru%E4%8Den%E3%AD%3F%2A%2A"><strong>Na co si dát pozor u povinného ručení?</strong></h2>

<p>Pojišťovny jsou uličníci, tak si všechno pořádně kontrolujte:</p>

<ol>
<li>Promyslete <strong>limity plnění</strong>, což je maximum, kolik pojišťovna bude hradit v případě škody nebo újmy na zdraví.</li>
<li>Kontrolujte, <strong>jestli vám nezkusili prodat i něco dalšího</strong> (třeba havarijní pojištění).</li>
<li>Pozor, že existující smlouvu lze <strong>vypovědět nejpozději 6 týdnů před prodloužením</strong>, takže to neodkládejte.</li>
</ol>

<h2 id="%2A%2Az%E3%A1v%E4%9Brem%2A%2A"><strong>Závěrem</strong></h2>

<p>Dává smysl se každý rok podívat, jestli nemůžete mít povinné ručení levněji, ať už u&nbsp;stávající pojišťovny nebo někde jinde.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Lanzarote - kam na výlety? Co navštívit?]]></title>
            <link href="https://blog.martinhujer.cz/lanzarote-kam-na-vylety/"/>
            <updated>2018-12-16T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/lanzarote-kam-na-vylety/</id>
            <content type="html"><![CDATA[<p>V říjnu 2018 jsme byli dva týdny na Lanzarote, takže mám spoustu tipů na zajímavá místa a obecně k Lanzarote.</p>

<p>Nejdříve jsme byli pár týdnů na <a href="/fuerteventura-kam-na-vylety/">Fuerteventuře</a>, takže ty věci, které jsem popsal v prvním článku, už tu nebudu opakovat.</p>

<p>Lanzarote má nádhernou sopečnou krajinu, takže doporučuji se při výletech průběžně zastavovat na odpočívadlech u silnice a prohlížet si výhledy (spolujezdec může koukat, ale jako řidič jsem si moc výhledů z auta neužil).</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/timanfaya-1.jpg" alt="Lanzarote - Montañas del Fuego - Timanfaya" /></p>

<h2 id="auto-z-p%E5%AFj%E4%8Dovny"><a href="https://www.amazinglanzarote.com/rent-a-car-in-lanzarote/">Auto z půjčovny</a></h2>

<p>Jeli jsme trajektem z Fuerteventury a hned po příjezdu jsme si v Playa Blanca zase půjčili auto od Cicar (dopředu jsme ho zarezervovali přes web). Měli jsme ho na celou dobu, než jsme se vraceli zpět na Fuerteventuru. Stejně jako na Fuerteventuře si neumím představit, jak bychom ty výlety zvládli autobusem.</p>

<h2 id="arrecife">Arrecife</h2>

<p>Na Lanzarote jsme bydleli v hlavním městě Arrecife. Výhoda je, že je docela uprostřed ostrova, takže na všechny výlety je to podobně daleko.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/arrecife.jpg" alt="Lanzarote - Arrefice" /></p>

<p>Parkování ve městě není jednoduché, protože se skládá převážně z úzkých jednosměrek. Většinou jsme parkovali <a href="https://goo.gl/maps/9jtFK9M6hAQ2">přibližně tady</a> nebo na hliněné ploše o pár metrů dále.</p>

<p>I ve městě toho je spoustu k vidění:</p>

<ul>
<li><a href="https://goo.gl/maps/8C42HRqRfXR2">Playa del Reducto</a> - městská pláž s pozvolným vstupem do vody. Kousek od pláže je půjčovna sportovního vybavení a <a href="https://www.amazinglanzarote.com/paddleboarding-sup-in-lanzarote/">paddleboardů</a>.</li>
<li><a href="https://goo.gl/maps/E6chbWLUs922">Castillo de San Gabriel</a> - na ostrůvku, kam se dostanete po mostě je malá pevnůstka s muzeem uvnitř a hezkým výhledem shora.</li>
<li><a href="https://goo.gl/maps/pek8sX3ZtqE2">Charco de San Ginés</a> je uzavřená zátoka s přístavem pro malé lodě. Super na procházení okolo. Je zajímavé se tam jít podívat v různých časech, protože vzhledem k přílivu a odlivu může být třeba půlka zaparkovaných lodiček na suchu. Když už tam budete, tak doporučuji zkusit zmrzlinu v <a href="https://goo.gl/maps/TrSUngD5wrH2">Antiu Xixona</a> nebo se večer zastavit na tapas v <a href="https://goo.gl/maps/dEWVr67BkC12">La Caja de tapas</a>.</li>
<li><a href="https://goo.gl/maps/huHct3XcSqu">Punto Sabroso</a> je malá restaurace s latinsko-americkými a španělskými jídly. Velmi <em>local</em> atmosféra - sice mají menu i v angličtině, ale na případné doplňující dotazy už budete potřebovat španělštinu.</li>
<li>pokud se vydáte po cyklostezce podél moře směrem k letišti, tak můžete dojít na další pláže nebo až do Playa Honda. Šli jsme tam pěšky, ale asi by bylo zábavnější půjčit si kolo - je to docela daleko.</li>
</ul>

<h2 id="monta%E3%B1as-del-fuego---timanfaya">Montañas del Fuego - Timanfaya</h2>

<p>Nejzajímavější věc na Lanzarote. V národním parku Timanfaya uvidíte měsíční krajinu jako následek sopečných erupcí v letech 1730 a 1736. Doporučuji tam vyrazit brzy po ránu, abyste se vyhnuli frontě.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/timanfaya-2.jpg" alt="Lanzarote - Montañas del Fuego - Timanfaya" /></p>

<p>Dostanete se tam autem a vstupné se platí už na odbočce z hlavní LZ-67 na LZ-602 (pozor, nedá se tam platit kartou). Následně dojedete na parkoviště k <a href="https://goo.gl/maps/mB9KF4eKoXS2">Restaurante El Diablo</a>. Až zaparkujete, tak běžte do fronty na autobus. Čekali jsme tam jen chvilku. Autobus vás vezme na projížďku skrz park (výklad ve španělštině, angličtině a němčině). Dnes už je aktivní jen sopka Timanfaya, podle které se celý park jmenuje.</p>

<p>Po projížďce vás ještě čeká ukázka toho, že sopka je aktivní (horkem v díře v zemi tam zapalují nějaké roští). Potom se můžete jít podívat do Restaurante El Diablo, kde kromě jiného nabízejí maso grilované na horku ze sopky. Ten gril stejně jako postavu "ďábla" (logo parku) vymyslel César Manrique (viz dále).</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/timanfaya-el-diablo.jpg" alt="Lanzarote - Montañas del Fuego - Timanfaya - El Diablo" /></p>

<h2 id="vstupenky-bonos">Vstupenky Bonos</h2>

<p>Na Lanzarote si můžete zakoupit jednu vstupenku ke vstupu na několik hlavních turistických atrakcí. Je to levnější než si kupovat jednotlivé vstupy zvlášť. <a href="https://www.cactlanzarote.com/es/organizate/#1467148563491-82734bd2-4300">Více informací najdete na oficiálním webu</a>.</p>

<h2 id="c%E3%A9sar-manrique"><a href="https://www.amazinglanzarote.com/cesar-manrique/">César Manrique</a></h2>

<p>César Manrique byl slavný lanzarotský umělec, sochař a architekt 20. století. Navrhnul spoustu věcí, které na Lanzarote uvidíte. Takový místní Jára Cimrman.</p>

<h2 id="casa-museo-de-c%E3%A9sar-manrique">Casa Museo De César Manrique</h2>

<p>Ve městě Haría je <a href="https://goo.gl/maps/Qy7bU9SXNYr">Casa Museo De César Manrique</a> - muzeum v domě, kde žil César Manrique. Dovnitř jsme nakonec nešli, protože nám 10€ za vstup přišlo hodně a nechtěli jsme trávit odpoledne vevnitř v muzeu.</p>

<p>Na dvoře mají vystavený SEAT Ibiza, který Manrique natřel na výstavu aut v Barceloně v roce 1987. Zajímavé je, že Cicar (největší kanárská půjčovna aut) se v roce 2015 domluvila se SEATem a nechali si nabarvit 96 nových SEAT Ibiza tak jako ten historický a normálně je půjčují (viděli jsme je několikrát). Našel jsem k tomu <a href="https://youtu.be/e3KbA4rk6z8?t=98">docela hezké video</a>.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/haria-cesar-manrique.jpg" alt="Lanzarote - César Manrique - SEAT Ibiza" /></p>

<h2 id="mirador-del-r%E3%ADo">Mirador del Río</h2>

<p><a href="https://goo.gl/maps/iTJZX7dKGuM2">Mirador del Río</a> je super vyhlídka v severní části ostrova. Je odtamtud krásný výhled na další kanárský ostrov La Graciosa a případně můžete posedět v zabudované kavárně. Jak vás jistě nepřekvapí, tak to celé navrhl César Manrique.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/mirador-del-rio-la-graciosa.jpg" alt="Lanzarote - Mirador del Río - La Graciosa" /></p>

<h2 id="volc%E3%A1n-de-la-corona-hike"><a href="https://www.amazinglanzarote.com/hike-to-volcano-monte-corona/">Volcán de la Corona (hike)</a></h2>

<p>Cestou z Mirador del Río sí můžete udělat krátký výlet na kráter Volcán de la Corona z vesnice Ye. Doporučuji zastavit u kostela a pak jít podle <a href="https://www.wikiloc.com/hiking-trails/volcan-de-la-corona-from-ye-31395197">trasy na Wikiloc</a>. Cesta vede do kopce mezi vinicemi (jednotlivé rostliny révy v ohrádkách z kamenů) až ke kráteru. Byli jsme tam zrovna když bylo zataženo a skoro do deště, takže to vypadalo hodně tajemně. Od kráteru buď můžete pokračovat jako okruh nebo se vrátit po stejné zpět.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/caldera-de-monte-corona.jpg" alt="Lanzarote - Caldera de Monte Corona" /></p>

<h2 id="cueva-de-los-verdes">Cueva de los Verdes</h2>

<p><a href="https://goo.gl/maps/r1684dhc7tP2">Cueva de los Verdes</a> je podzemní jeskyně sopečného původu (vypadá to jako krápníková jeskyně, ale nejsou tam krápníky). Vznikla tak, že tamtudy tekla roztavená láva směrem k moři. Určitě stojí za návštěvu.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/cueva-verdes.jpg" alt="Lanzarote - Cueva de los Verdes" /></p>

<h2 id="jameos-del-agua">Jameos del Agua</h2>

<p><a href="https://goo.gl/maps/FWhayPq3BpR2">Jameos del Agua</a> je jeskyně s velkým podzemním jezírkem, kde žijí bílí mini-krabi. Kromě jiného tam je také muzeum a podzemní koncertní síň. Samozřejmě v tom má zase prsty César Manrique.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/jameos-del-agua.jpg" alt="Lanzarote - Jameos del Agua" /></p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/jameos-del-agua-sunset.jpg" alt="Lanzarote - Jameos del Agua - Sunset" /></p>

<h2 id="jard%E3%ADn-de-cactus"><a href="https://www.amazinglanzarote.com/cactus-garden-jardin-de-cactus/">Jardín de Cactus</a></h2>

<p><a href="https://goo.gl/maps/k6WHFi7Bfc92">Jardín de Cactus</a> je obrovská kaktusová zahrada, kterou (jak jinak) navrhl César Manrique. Pokud budete z chození mezi kaktusy unavení, tak si můžete dát kávu v kavárně, která je součástí zahrady. (Baví mě, že i na takhle turisticky exponovaném místě ta káva je docela dobrá a není předražená).</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/jardin-de-cactus.jpg" alt="Lanzarote - Jardín de Cactus" /></p>

<h2 id="teguise">Teguise</h2>

<p>Historická vesnice <a href="https://goo.gl/maps/r2JPMYeeckk">Teguise</a> byla kdysi hlavním městem ostrova. Kousek za městem je kopec s výhledy na celý ostrov a na něm pevnost <a href="https://en.mapy.cz/s/3h5Qc">Castillo de Santa Barbara</a>. Zároveň je tam kráter, který si můžete obejít dokola.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/teguise-castillo-de-santa-barbara.jpg" alt="Lanzarote - Castillo de Santa Barbara" /></p>

<h2 id="casa-museo-del-campesino">Casa Museo del Campesino</h2>

<p><a href="https://goo.gl/maps/o1JoCuRjrdk">Casa Museo del Campesino</a> je muzeum zemědělství a řemesel (vstup zdarma). Uprostřed areálu můžete sejít do jeskyně s tunelem. Celé to vymyslel náš známý César Manrique včetně monumentu stojícího před muzeem.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/museo-del-campesino.jpg" alt="Lanzarote - Casa Museo del Campesino" /></p>

<h2 id="v%E3%ADna-na-lanzarote">Vína na Lanzarote</h2>

<p>Při výletech po ostrově si určitě všimnete, že všude pěstují révu. Typicky je každá rostlina révy v samostatné ohrádce z kamenů, které ji chrání před větrem. Zároveň mají půdu přikrytou drobným sopečným kamením, které drží vláhu (a přitom je lehké). Víno si můžete koupit pak i běžně v supermarketu - láhev bílého El Grifo stojí 11€ (případně můžete zkusit jiné značky - vždycky je na nich napsané, že jsou z Lanzarote). Pokud budete mít čas, tak můžete navštívit muzeum vinařství <a href="https://goo.gl/maps/CpLX75mJ7Nv">Museo el Grifo</a> (mají i variantu prohlídky s ochutnávkou).</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/vinna-reva.jpg" alt="Lanzarote - Vinná réva" /></p>

<h2 id="monta%E3%B1a-blanca-hike"><a href="https://www.amazinglanzarote.com/montana-blanca-hike/">Montaña Blanca (hike)</a></h2>

<p>Montaña Blanca je hora se super výhledem, ale podle mě to je takový otloukánek, protože se jmenuje stejně jako druhá Montaña Blanca, která má uprostřed kráter, takže je mnohem populárnější. Ale tenhle hike jsme šli na tu první, protože cestou na tu druhou jsme narazili na uzavřené silnice kvůli triatlonu. Mrkněte na <a href="https://www.wikiloc.com/hiking-trails/montana-blanca-hike-not-the-caldera-de-montana-blanca-31395716">záznam trasy na wikiloc</a>. Jeli jsme tam v sobotu, takže jsme ve vesnici Montaña Blanca zaparkovali na prázdném parkovišti u školy. A následoval trošku náročnější hike na horu. Výhoda je, že to lze jít jako okruh a není potřeba se vracet po stejné trase.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/montana-blanca-vyhled.jpg" alt="Lanzarote - Montaña Blanca" /></p>

<h2 id="caldera-de-monta%E3%B1a-blanca-hike"><a href="https://www.amazinglanzarote.com/caldera-de-montana-blanca-hike/">Caldera de Montaña Blanca (hike)</a></h2>

<p>Výlet ke kráteru Caldera de Montaña Blanca je delší, tak si nezapomeňte vzít dost vody a svačinu. <a href="https://www.wikiloc.com/hiking-trails/caldera-de-montana-blanca-31395976">Záznam trasy jsem opět dal na wikiloc</a>. Parkovali jsme zbytečně daleko ve vesnici, můžete buď zaparkovat na kraji té hlavní silnice kousek před odbočkou na prašnou cestu nebo ještě kus popojet po té prašné cestě a zaparkovat tam (označeno na mapě). Pak už se vydáte po svých sopečnou krajinou.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/caldera-montana-blanca-1.jpg" alt="Lanzarote - Caldera de Montaña Blanca" /></p>

<p>Je super, že to je oficiální trasa, takže jsou podél i informační tabule o sopkách apod. Nejdříve dojdete k menšímu kráteru, do kterého se dá vejít z boku (Caldera de Montaña Caldereta). Zajímavé je, že tam dřív něco pěstovali a chovali kozy (jak je to uvnitř chráněné proti větru, tak se tam drží vlhkost). Teprve potom začnete stoupat na okraj velkého kráteru Caldera de Montaña Blanca. Ten je možné obejít dokola (cestou vylezete na samotný vrchol Montaña Blanca). Pozor, že tam, kde se pak potřebujete odpojit z okruhu po obvodu kráteru, ta odbočka není úplně zřejmá, ale je označená naskládanými kameny (občas koukněte do mapy). Po sestupu se napojíte na tu cestu, po které jste ke kráterům přišli.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/caldera-montana-blanca-2.jpg" alt="Lanzarote - Caldera de Montaña Blanca" /></p>

<p>Pokud byste na Caldera de Montaña Blanca chtěli výlet s průvodcem, tak <a href="https://www.outdoorvisit.com/tour/105-explore-the-magnificent-caldera-blanca-of-lanzarote/?utm_source=martinhujer.cz&amp;utm_medium=web&amp;utm_campaign=blog_lanzarote_post">je v nabídce na OutdoorVisit</a>.</p>

<h2 id="los-hervideros">Los Hervideros</h2>

<p>Na západním pobřeží je několik míst, které stojí za zastávku. <a href="https://goo.gl/maps/wqRjNtsXgZ32">Los Hervideros</a> je vyhlídka z útesů na mořský příboj (i v jeskyních). Název to má podle toho, že se tam jakoby <em>vaří</em> voda.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/los-hervideros.jpg" alt="Lanzarote - Los Hervideros" /></p>

<h2 id="el-golfo-a-p%E3%A1r-dal%E5%A1%E3%ADch-v%E4%9Bc%E3%AD-na-z%E3%A1padn%E3%ADm-pob%E5%99e%E5%BE%E3%AD">El Golfo a pár dalších věcí na západním pobřeží</h2>

<p>Pokud pojedete od Los Hervideros dále, tak narazíte na pláž <a href="https://goo.gl/maps/PGt2JKjWSS32">Playa Montaña Bermeja</a>, která také stojí za vidění.
Nakonec dojedete do městečka <a href="https://goo.gl/maps/ps6VetYKw6U2">El Golfo</a>. Je tam spoustu rybích restaurací s výhledem na moře a na případný západ slunce. Až tam budete čekat, tak se určitě dojděte podívat na zelené jezírko <a href="https://goo.gl/maps/qGebiQFTtSu">El Lago Verde</a>.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/lago-verde.jpg" alt="Lanzarote - Lago Verde" /></p>

<h2 id="vrak-lodi-u-arrecife"><a href="https://www.amazinglanzarote.com/shipwreck-near-arrecife/">Vrak lodi u Arrecife</a></h2>

<p>Kousek od Arrecife můžete zastavit na <a href="https://goo.gl/maps/c75rgMFKqZ92">pláži, kterou zdobí vrak lodi</a>. (Zaparkovat můžete o pár desítek metrů dál, kde je před budovou dost místa.) Vrak tam je od roku 1981, kdy ta loď plula okolo Lanzarote a zjistili, že jim teče dovnitř. Arrecife jim nedovolilo jet do přístavu, protože kdyby se potopili uprostřed přístavu, tak by ho zablokovali. Místo toho je nasměrovali na mělčinu v písčité zátoce, kde je dodnes. Už delší dobu plánují, že vrak odstraní, ale zatím (říjen 2018) tam pořád je. Když jsme tam byli, tak z něj někdo dokonce skákal do vody.</p>

<p><img src="/data/2018/2018-12-16-lanzarote-kam-na-vylety/shipwreck.jpg" alt="Lanzarote - Shipwreck Arrecife" /></p>

<h2 id="punta-mujeres">Punta Mujeres</h2>

<p><a href="https://goo.gl/maps/vHnZcoNu1Pz">Punta Mujeres</a> je městečko, kde naleznete přírodní "bazény" - ohraničený kus moře, kde se dá příjemně koupat.</p>

<h2 id="pasteler%E3%ADa-san-antonio">Pastelería San Antonio</h2>

<p>Sladká tečka na závěr. <a href="https://goo.gl/maps/eKuLCXvqZXz">Pastelería San Antonio</a> je pekárna/kavárna ve vesnici Tías. Stavovali jsme se tam dvakrát cestou z nějakého výletu na kávu a něco sladkého nebo slaného k jídlu.</p>

<h1 id="z%E3%A1v%E4%9Br">Závěr</h1>

<p>Byli jsme na Lanzarote jen dva týdny, ale viděli jsme toho hrozně moc. Neumím si představit, že bychom na celý ostrov měli méně času. Opět se osvědčilo půjčené auto, i když večerní parkování v přeplněném Arrecife bylo náročnější.</p>

<p>Pokud se budete chystat na Lanzarote a budete mít více času, tak doporučuji alespoň týden z toho strávit <a href="/fuerteventura-kam-na-vylety/">na Fuerteventuře, tam je toho taky spoustu k vidění</a>.</p>

<p>A pokud se chystáte do <a href="/las-palmas-gran-canaria-kam-na-vylety/">Las Palmas na Gran Canarii, tak mrkněte na moje tipy na výlety</a>.</p>

<h1 id="amazinglanzarote.com"><a href="https://www.amazinglanzarote.com/">AmazingLanzarote.com</a></h1>

<p>Vytvořil jsem ještě samostatný <a href="https://www.amazinglanzarote.com/">web s informacemi o Lanzarote</a> (v angličtině).</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Jaké novinky přinese PHP 7.3]]></title>
            <link href="https://blog.martinhujer.cz/jake-novinky-prinese-php-7-3/"/>
            <updated>2018-11-28T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/jake-novinky-prinese-php-7-3/</id>
            <content type="html"><![CDATA[<p>Vydání PHP 7.3 je plánováno na 6. prosince 2018. Přináší několik nových funkcí, vylepšení a různá pročištění jazyka. Oproti jiným vydáním mu sice chybí nějaký trhák, ale na druhou stranu nepřibyly ani žádné zásadní nekompatibilní změny, takže upgrade bude snadný.</p>

<p><strong><a href="https://www.zdrojak.cz/clanky/jake-novinky-prinese-php-7-3/">Článek vyšel</a> na serveru Zdroják.cz</strong></p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Best PhpStorm plugins for Symfony development]]></title>
            <link href="https://blog.martinhujer.cz/best-phpstorm-plugins-for-symfony-development/"/>
            <updated>2018-11-26T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/best-phpstorm-plugins-for-symfony-development/</id>
            <content type="html"><![CDATA[<p>I've been using PhpStorm for quite a while and I'm still surprised now and then when it suggests an auto-completion for something I thought that's not possible.</p>

<p>But there are still many things - usually framework- or library-specific - that PhpStorm cannot do on its own. But there are plugins that can step in place and do the magic for specific framework or library.</p>

<h2 id="php-annotations">PHP Annotations</h2>

<p><a href="https://plugins.jetbrains.com/plugin/7320-php-annotations">PHP Annotations plugin</a> analyses the classes which can be used as annotations and provides code-completing when writing annotations - e.g. Doctrine ORM mappings.</p>

<p><img src="/data/2018/2018-11-26-best-phpstorm-plugins-for-symfony/php-annotations.gif" alt="PHP Annotations plugin" /></p>

<h2 id="php-toolbox">PHP Toolbox</h2>

<p><a href="https://plugins.jetbrains.com/plugin/8133-php-toolbox">PHP Toolbox plugin</a> was extracted from Symfony plugin and provides better auto-completion for several libraries (PHPUnit, Behat, Doctrine, Twig etc.)</p>

<h2 id="symfony-plugin">Symfony Plugin</h2>

<p>Both PHP Annotations and PHP Toolbox are best used together with the <a href="https://plugins.jetbrains.com/plugin/7219-symfony-plugin">Symfony Plugin</a>. This plugin provides auto-completion for anything in Symfony you can imagine. It analyses the DI container code, so it can suggest the services when you call <code>$container-&gt;get()</code>. It provides various auto-completions in the YAML config files. Apart from that, it can handle lots of Form, Twig and Routing auto-completions. You can click through from controller to template, from the name of the route to the controller where it is defined. It analyses translation files and provides the completion for the translations when calling the translate function or using <code>trans</code> filter in Twig.</p>

<h3 id="how-to-use-custom-template-directory-with-the-symfony-plugin%3F">How to use custom template directory with the Symfony plugin?</h3>

<p>If you have templates in a custom namespace and directory - e.g. configured in <code>config/packages/twig.yaml</code>, the auto-completion in controllers or other templates won't work for those, because the Symfony plugin can't detect them.</p>

<pre><code class="yaml">twig:
    paths:
        '%kernel.project_dir%/src/App/Resources/templates': App
        '%kernel.project_dir%/src/Admin/Resources/templates': Admin
</code></pre>

<p>You can fix it by manually adding them in PhpStorm Settings (PHP -> Symfony -> Twig/Template). But each of the developers must do it himself. Unless you put in into <code>ide-twig.json</code> in a project root:</p>

<pre><code class="json">{
    "namespaces": [
        {
            "namespace": "App",
            "path": "src/App/Resources/templates"
        },
        {
            "namespace": "Admin",
            "path": "src/Admin/Resources/templates"
        }
    ]
}
</code></pre>

<p>This file is loaded by Symfony plugin and the namespaces and paths will be configured automatically (you can check it in the Settings).</p>

<h3 id="enable-translation-keys-auto-completion-for-custom-translation-methods">Enable translation keys auto-completion for custom translation methods</h3>

<p>When you create a custom method that accepts translation key, the PhpStorm won't do the auto-completion for it, because it does not know that the parameter is a translation key. Luckily, the Symfony plugin provides an easy way to let it know of the type of the parameter. Have a look at the following example:</p>

<pre><code class="php">&lt;?php
class TitleManager
{
    /**
     * @param string $label #TranslationKey
     */
    public function addItem(string $label): void
    {
        // ...
    }
}

$titleManager = new TitleManager();
$titleManager-&gt;addItem('app.products.name'); // the translation key auto-completion will work here 
</code></pre>

<p>You can see that I added <code>#TranslationKey</code> to the method parameter PHPDoc. It is something they call <a href="https://symfony2-plugin.espend.de/extension/method_parameter.html#hash-tags">Hash Tags</a> in Symfony plugin. It allows you to define the <em>type</em> of the parameter, so the plugin can provide the auto-completion. Apart from <code>TranslationKey</code>, you can also use <code>Entity</code>, <code>Service</code>, <code>FormType</code>, <code>Template</code>, <code>Route</code>, <code>Class</code>, <code>TranslationDomain</code>, <code>FormOption</code> or <code>Interface</code> (don't forget to prefix them with <code>#</code>).</p>

<h2 id="phpunit-enhancement">PHPUnit Enhancement</h2>

<p><a href="https://plugins.jetbrains.com/plugin/9674-phpunit-enhancement">PHPUnit Enhancement plugin</a> provides smart autocomplete for mock creation. It also handles refactoring - if you rename a method which is mocked, it is correctly renamed in the string in tests.</p>

<p><img src="/data/2018/2018-11-26-best-phpstorm-plugins-for-symfony/phpunit-enhancement.gif" alt="PHPUnit Enhancement plugin" /></p>

<h2 id="php-composer.json-support">PHP composer.json support</h2>

<p><a href="https://plugins.jetbrains.com/plugin/7631-php-composer-json-support">PHP composer.json support plugin</a> adds <code>composer.json</code> auto-complete and validation. It also displays which version of each packages is installed (from the data in <code>composer.lock</code>)</p>

<h2 id="php-inspections-ea-extended">Php Inspections (EA Extended)</h2>

<p><a href="https://plugins.jetbrains.com/plugin/7622-php-inspections-ea-extended-">Php Inspections (EA Extended)</a> is a plugin that adds a lot of inspections for statically analyzing the PHP code you are writing and suggesting fixes and improvements.</p>

<h2 id="twig-support">Twig Support</h2>

<p><a href="https://plugins.jetbrains.com/plugin/7303-twig-support">Twig Support</a> is an official plugin from Jetbrains bundled with PhpStorm, so just enable it in the settings and you are done.</p>

<h2 id=".env-files-support">.env files support</h2>

<p>Symfony 4 uses <code>.env</code> files for configuration parameters (instead of <code>parameters.yml</code>) and <a href="https://plugins.jetbrains.com/plugin/9525--env-files-support">.env files support plugin</a> provides syntax highlighting for the <code>.env</code> file.</p>

<h2 id=".ignore">.ignore</h2>

<p><a href="https://plugins.jetbrains.com/plugin/7495--ignore">.ignore plugin</a> provides syntax highlighting and path auto-completion for <code>.gitignore</code> (and other ignore files). It also automatically changes the color of the ignored files in the Project File Tree to gray.</p>

<h2 id="conclusion">Conclusion</h2>

<p>I can't imagine using PhpStorm for Symfony development without those plugins. They save me time and prevent mistakes by providing the magic auto-completion.</p>

<p>Do you use some other useful plugins? Please let me know in the comments.</p>

<p><em>Update:</em> If you are interested in plugins not directly related to Symfony, have a look at the <a href="https://localheinz.com/blog/2017/10/27/essential-phpstorm-plugins/">Essential PhpStorm plugins</a> article by <em>localheinz</em>.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Fuerteventura - kam na výlety? Co navštívit?]]></title>
            <link href="https://blog.martinhujer.cz/fuerteventura-kam-na-vylety/"/>
            <updated>2018-11-18T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/fuerteventura-kam-na-vylety/</id>
            <content type="html"><![CDATA[<p>V říjnu 2018 jsme byli skoro tři týdny na Fuerteventuře, takže mám spoustu tipů na zajímavá místa a obecně k Fuerteventuře.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/puerto-rosario.jpg" alt="Fuerteventura - Puerto del Rosario" /></p>

<h1 id="cesta-tam---letenky%2C-autobus">Cesta tam - letenky, autobus</h1>

<p>Na Fuerteventuru se sice dá letět přímo z Prahy, ale jednosměrná letenka stojí cca 7 tisíc, takže jsme nakonec letěli s Ryanair z Berlína. Jedna letenka ze Schönefeldu stála asi 30€. Dá se tam v pohodě dopravit Flixbusem nebo Regiojetem (autobusem). A taky vlakem ČD (ranní jízdenky myslím v 6:30 z Prahy jsou docela levné).</p>

<p>Připomínám tip, který už jsem někde psal - na letišti se po security typicky dá docela levně koupit voda v láhvi v automatu na pití - na Fuerteventuře třeba 0.5l za 1€. Na Schönefeldu si zas můžete skrz security vzít prázdnou láhev a naplnit si ji z vodovodu.</p>

<h1 id="doprava---autobusy">Doprava - autobusy</h1>

<p>Autobusy na Fuerteventuře provozuje společnost Tiadhe. <a href="http://tiadhe.com/en/home/">Jízdní řády mají na webu</a> - pozor, jsou tam jen odjezdy z výchozí stanice, ne průjezdy jednotlivými zastávkami. Jízdenky se kupují u řidiče v hotovosti.</p>

<h1 id="doprava---trajekty">Doprava - trajekty</h1>

<p>Po dvou týdnech na Fuerteventuře jsme se na dva týdny přesouvali na Lanzarote a pak zase zpět. Z města Corralejo tam jezdí tři společnosti. Armas, Fred Olsen a Lineas Romero. Fred Olsen je nejrychlejší, ale taky nejdražší. My jsme obě cesty jeli s Lineas Romero (15€ za osobu a cestu), kteří jsou spíš taková výletní loď a neberou auta.</p>

<h1 id="doprava---auto">Doprava - auto</h1>

<p>Vzhledem k tomu, že jsme během dne potřebovali kromě výletů také pracovat, tak jsme si půjčili auto na celých 14 dnů, co jsme byli na Fuerteventuře. Ukázalo se, že nejdražší je půjčení na jeden den (jako jsme si ho třeba půjčovali v Las Palmas) a pak to hodně klesne. Půjčení na celých 14 dnů stálo 220 € (+ nafta).</p>

<p>Půjčovali jsme rovnou na letišti od Cicar (i pak na Lanzarote) - mají pojištění bez spoluúčasti a stačí normální karta, není potřeba kreditka. Auto jde dopředu zarezervovat na webu, abyste měli jistotu, že ho budou mít k dispozici. Zároveň si tím ušetříte opisování údajů při přebírání, protože to všechno už jde vyplnit přes web. Při přebírání si můžete zadarmo dopsat i druhého řidiče, což je fajn. Auto jsme vraceli v Corraleju v přístavu (tzn. není problém vrátit jinde, než jste si ho půjčili). Palivo by při vrácení mělo být na stejné úrovni jako předtím.</p>

<p>Pozor, s auty z půjčoven by se mělo jezdit jen po asfaltových cestách, jinde většinou neplatí pojištění (mrkněte do smlouvy).</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/faro-toston-astra.jpg" alt="Faro del Tostón - Opel Astra" /></p>

<h1 id="po%E4%8Das%E3%AD">Počasí</h1>

<p>Typicky bylo na koupání - teploty kolem 24°C a když svítilo slunce tak vedro. V noci teploty lehce pod 20°C.</p>

<h1 id="j%E3%ADdlo">Jídlo</h1>

<p>Pro Fuerteventuru jsou typické kozí sýry - queso majorero (viz níže).</p>

<p>Voda z vodovodu je odsolovaná, takže není vhodná na pití a nezbývá, než nosit barely s vodou ze supermarketu. Vypozoroval jsem, že 8l barely mají typicky lepší držadlo než 5l, takže i když jsou těžší, tak se lépe nosí.</p>

<p>Ve větších obchodech běžně mají pult s čerstvými rybami a mořskými plody. My kupujeme předvařené krevety (<em>langostino cocido</em>, 9€ za kilo), nebo plátek z tuňáka, který vám ukrojí (<em>rodaja de atún</em>, 12€ za kilo). Letos jsme rozšířili repertoár i o chobotnici (<em>pulpo cocido</em>). Dá se koupit předvařené zavakuované chapadlo nebo už přímo kousky. Stačí na chvíli hodit na pánev a pak posypat mletou paprikou (<em>pulpo a la gallega</em>)</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/pulpo-a-la-gallega.jpg" alt="Pulpo a la Gallega" /></p>

<h1 id="bankomaty">Bankomaty</h1>

<p>Za výběr z některých bankomatů si kromě vaší banky účtuje poplatek ještě ta banka, které ten bankomat patří. Ale při výběru z bankomatů Cajamar Caja Rural poplatek neúčtují (vyzkoušeno Revolut a Airbank kartou).</p>

<h1 id="m%E4%9Bsta-na-fuerteventu%E5%99e">Města na Fuerteventuře</h1>

<p>Fuerteventura je velký ostrov - druhý největší z Kanárských ostrovů - a přitom tam žije jen 100 tisíc lidí, takže je hodně prázdný. Nechtěli jsme trávit tolik času v autě, tak jsme první týden bydleli na severu a projeli jsme ta místa na severu a druhý týden na jihu a prozkoumali to tam. Města na Fuerteventuře se hodně liší, v některých bydlí hlavně místní a jiná jsou letoviskovitá letoviska.</p>

<h2 id="el-cotillo">El Cotillo</h2>

<p><a href="https://goo.gl/maps/Ah9VW9XJGiz">El Cotillo</a> je malé městečko na severu, kde jsme strávili první týden. Není přeplněné turisty, takže pokud bychom na Fuerteventuru jeli někdy na měsíc, tak asi do Cotilla. Je zajímavé tím, že má velkou surfařskou pláž. A plážové laguny.</p>

<ul>
<li><a href="https://goo.gl/maps/gMSa5CaqD4T2">Laguny</a> jsou část pláže, která je chráněná přírodním vlnolamem a při odlivu tam je dost mělko - ideální pro děti.</li>
<li><a href="https://goo.gl/maps/ow5kn6XDVHk">Castillo del Tostón</a> - místní minipevnost s fajn výhledem. Vstup 3€, platba pouze kartou.</li>
<li><a href="https://goo.gl/maps/dpE9so6BdoB2">El Goloso de Cotillo</a> - kavárna, kde jsme byli asi 5×</li>
<li><a href="https://goo.gl/maps/ouDtoYr3Rw22">Kalima</a> - tapas bar</li>
</ul>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/cotillo-lagunky.jpg" alt="El Cotillo - lagunky" /></p>

<h2 id="corralejo">Corralejo</h2>

<p><a href="https://goo.gl/maps/FhprZRY27RJ2">Corralejo</a> je letovisko oblíbené britskými turisty. Pláž nic moc. Oproti El Cotillo dražší.</p>

<h2 id="puerto-del-rosario">Puerto del Rosario</h2>

<p><a href="https://goo.gl/maps/aoJyRdY34BH2">Puerto del Rosario</a> je hlavní město Fuerteventury, málo turistů. Strávili jsme tam posledních 5 dnů. V přístavu průběžně kotví různé výletní lodě. Pokud neznáte, tak doporučuji <a href="https://www.marinetraffic.com/">MarineTraffic.com</a> - obdoba FlightRadaru pro lodě. Hezká pláž s bílým pískem.</p>

<ul>
<li><a href="https://goo.gl/maps/RzTTEBdWn9p">Oficina de Turismo de Puerto del Rosario</a> - turistické informační centrum. Doporučuji navštívit hned po příletu, získáte spoustu tipů (možná i něco, co tu nebudu mít napsané)</li>
<li><a href="https://goo.gl/maps/46eL262Vh232">Café Atlántico</a> - cafeteria s výhledem na moře. Mají dobré obložené bagety za 3€.</li>
<li><a href="https://goo.gl/maps/UsXs43jdPyu">Cafetería Del 15</a> - cafeteria, kam jsme náhodně zapadli po příletu, když jsme měli hlad. Velmi local - chodí tam na oběd místní v montérkách.</li>
<li><a href="https://goo.gl/maps/tdd5Bj5RYD22">parkoviště</a> kousek od centra, zdarma. Pozor, abyste nezadali do navigace druhé podobné, které je mnohem dál (nám se to první den povedlo).</li>
<li><a href="https://goo.gl/maps/AtX3xH2y7bs">Panadería Pastelería Pulido Alonso</a> - příjemná kavárna, mají několik poboček na ostrově.</li>
</ul>

<h2 id="dal%E5%A1%E3%AD-m%E4%9Bsta">Další města</h2>

<ul>
<li><p><strong>Calleta de Fuste</strong> - letoviskovité letovistko</p></li>
<li><p><strong><a href="https://goo.gl/maps/nrd4YBA2Yh82">Gran Tarajal</a></strong> - městečko zajímavé zejména tím, že má pláž s tmavým pískem a spoustu jednosměrek.</p></li>
<li><p><strong><a href="https://goo.gl/maps/WHrEs56fQc32">Costa Calma</a></strong> - letovisko, s obrovskou pláží, kde jsme strávili náš druhý týden na Fuerteventuře. Tady je to pro změnu oblíbené zejména německými turisty. Bydleli jsme v apartmánu kousek dál z centra, takže to bylo fajn. A v místním Sparu mají v sortimentu i kávu Dallmayr.</p></li>
<li><p><strong><a href="https://goo.gl/maps/yTMovxmv2AB2">Morro Jable</a></strong> - další letoviskovité letovisko na jihu ostrova. Hodně pěkná pláž.</p></li>
</ul>

<h1 id="v%E3%BDlety">Výlety</h1>

<p>Výletů jsme podnikli spoustu. Ta místa, která jsou přímo v nějakém městě jsem napsal přímo k nim. Všechno jsme objezdili autem, takže nevím, které z nich jsou nedosažitelné autobusem.</p>

<h2 id="el-faro-del-tost%E3%B3n">El Faro del Tostón</h2>

<p><a href="https://goo.gl/maps/9KBJmjPp3nt">El Faro del Tostón</a> je maják několik kilometrů od El Cotillo. Je tam muzeum tradičního rybářství, ale dorazili jsme tam až po zavíračce. Původně jsme tam chtěli jít pěšky z El Cotillo, ale naštěstí jsme jeli autem, je to po silnici, takže by to nebyla zábavná procházka.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/faro-toston.jpg" alt="El Faro del Tostón" /></p>

<h2 id="lajares">Lajares</h2>

<p>Na <a href="https://goo.gl/maps/pEkT5GmkJCG2">Lajares</a> našla Ivča v Lonely Planet doporučení, že tam jsou fajn kavárny. Ty tam jsou (mimochodem pobočka našeho oblíbeného El Goloso, které jsme znali z Cotilla). Akorát, že ono tam už nic dalšího zajímavého není.</p>

<h2 id="la-oliva">La Oliva</h2>

<p><a href="https://goo.gl/maps/XKCcpvia7hT2">La Oliva</a> je malá vesnice s docela hezkým kostelem a galerií. Ale co je zajímavé jsou větrné mlýny <a href="https://goo.gl/maps/fUELYtXptzA2">Molinos De Villaverde</a> kousek odtamtud. Pozor, silnice nevede až k nim a pak se nečekaně mění na hliněnou a není se kde otočit. Takže radši auto nechte u hlavní silnice a dojděte to pěšky.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/molinos.jpg" alt="Molinos De Villaverde" /></p>

<h2 id="museo-del-queso-majorero">Museo del Queso Majorero</h2>

<p>I když je na první pohled Fuerteventura suchá a pustá, tak tam chovají <a href="https://es.wikipedia.org/wiki/Cabra_majorera">kozy majorero</a> a z jejich mléka vyrábějí sýr (pod různými značkami). O historii a současnosti výroby sýra se dozvíte v muzeu sýra <a href="https://goo.gl/maps/q22DbMNceEJ2">Museo del Queso Majorero</a>. Za mě hodně zábavné a dobře zpracované. Součástí je i větrný mlýn a kaktusová zahrada, takže si na to nechte více času. Na ty kozy můžete narazit po celém ostrově i u silnice nebo na silnici, tak pozor.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/museo-queso.jpg" alt="Museo del Queso Majorero" /></p>

<h2 id="antigua-a-pulido-alonso">Antigua a Pulido Alonso</h2>

<p>Kavárnu Pulido Alonso už jsem předtím zmiňoval, ale ta v Antigua je pro nás speciální. Protože když jsme po druhém týdnu na Fuerteventuře jeli do Corraleja na trajekt na Lanzarote, tak jsme cestou zjistili, že máme zbytečně moc času a že bychom se cestou mohli stavit někde na kávu. A při cestě byla Antigua, kde jsme podle Google Map vybrali právě kavárnu <a href="https://goo.gl/maps/fkhyNvbYdLU2">Pulido Alonso</a>.</p>

<h2 id="betancuria">Betancuria</h2>

<p><a href="https://goo.gl/maps/KHnve8Ubqn92">Betancuria</a> byla kdysi hlavním městem Fuerteventury. A kromě jiného tam je kostel s počátky už v 15. století. Zajímavostí je, že to tam funguje na podobném principu jako Karlštejn - po 17h tam je všecko zavřené. Kousek od Betancurie jsou <a href="https://goo.gl/maps/do44rKZKUDF2">na kopci sochy</a> nějakých králů a fajn výhled do kraje.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/sochy.jpg" alt="Sochy nedaleko Betancuria" /></p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/vyhlidka-sochy.jpg" alt="Vyhlídka u soch" /></p>

<h2 id="parque-natural-dune-de-corralejo">Parque Natural Dune De Corralejo</h2>

<p><a href="https://goo.gl/maps/LbfH2oxtMsP2">Písečné duny</a> nedaleko Corraleja. Zaparkovat se dá dobře <a href="https://goo.gl/maps/rP4i6FTKkEL2">na tomhle parkovišti</a>. Pokud jste nikdy na písečných dunách nebyli, tak určitě doporučuji - je to super zážitek (další jsou třeba v <a href="/las-palmas-gran-canaria-kam-na-vylety/">Maspalomas na Gran Canarii</a>). A směrem ke Corrajelu je několik hezkých pláží. Nakonec jsme se tam nekoupali, protože když jsme přijeli, tak byla žlutá vlajka a než jsme vyndali věci z auta, tak ji plavčík vyměnil za červenou.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/duny.jpg" alt="Duny Corrajelo" /></p>

<p>Jenomže to bychom nebyli my, kdybychom jenom zevlili na dunách. Místo toho jsme měli naplánovaný výstup na nedaleký kopec Montaña Roja. Záznam trasy <a href="https://www.wikiloc.com/hiking-trails/fuerteventura-montana-roja-near-corralejo-30657088">jsem nahrál na Wikiloc</a>. Když se na to podíváte, tak je vidět, že jsme zastavili až moc daleko - ale z auta to vypadalo, že je tam všude hrozně vysoký rantl a nechtěli jsme to auto zničit. Když jsme tam pak šli pěšky, tak na dvou místech to bylo na parkování OK, tak jsou v té mapě označené. Shora byl pak super výhled.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/montana-roja.jpg" alt="Montaña Roja" /></p>

<h2 id="salinas-del-carmen">Salinas del Carmen</h2>

<p>Sůl se získává buď v solných dolech nebo se taky dá usušit mořská voda, jako to třeba dělali a dělají v muzeu výroby soli <a href="https://goo.gl/maps/utr2DGvURgM2">Salinas del Carmen</a>. Vnitřní expozice je pěkně zpracovaná, ale hlavně je součástí i venkovní část, kde si prohlédnete, jak to celé funguje.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/salinas.jpg" alt="Salinas del Carmen" /></p>

<h2 id="p%E3%A1jara-a-vyhl%E3%ADdka-na-fv-605">Pájara a vyhlídka na FV-605</h2>

<p>Co jsme občas dělali bylo, že pokud jsme měli čas, tak jsme místo nějaké hlavní silnice (FV-1, FV-2) vzali nějakou scénickou trasou přes kopce a vesnice (typu FV-605). Takhle jsme se stavili ve vesnici <a href="https://goo.gl/maps/abstFcAi8mR2">Pájara</a>. Ta je zajímavá tím, že tam mají kostel ze 17. století, řeku, kde by se vám prášilo za kánoí a uprostřed kruháče místo fontánky sochu pána dojícího kozu.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/pajara-reka.jpg" alt="Pájara - řeka" /></p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/pajara-dojeni.jpg" alt="Pájara - socha dojiče" /></p>

<p>Pokud pojedete z Pájary na jih přes kopce po FV-605, tak cestou můžete zastavit na <a href="https://goo.gl/maps/xzNS4UveS8v">vyhlídce se super výhledem</a></p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/vyhlidka-fv-605.jpg" alt="Vyhlídka FV-605" /></p>

<h2 id="pozo-negro">Pozo Negro</h2>

<p>Rybářská vesnice na konci silnice. Pláž s černým pískem a oblázky a dvě kavárny.</p>

<h2 id="faro-de-la-entallada">Faro de la Entallada</h2>

<p><a href="https://goo.gl/maps/kZWay5qZUn32">Faro de la Entallada</a> je maják na útesu se super výhledem. Poslední úsek silnice je opravdu úzký a se svodidly tam docela šetřili, tak opatrně.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/faro-entallada.jpg" alt="Faro de la Entallada" /></p>

<h2 id="mirador-del-salmo">Mirador del Salmo</h2>

<p>Vyhlídka <a href="https://goo.gl/maps/WwjF9pRKP1H2">Mirador del Salmo</a> stojí za zastávku, pokud bude mít cestu okolo. Je to hned u silnice.</p>

<h2 id="pico-de-la-zarza">Pico de la Zarza</h2>

<p><a href="https://goo.gl/maps/xf1JjhdNCoy">Pico de la Zarza</a> (někdy také nazývaná Pico de Jandía) je nejvyšší hora Fuerteventury. Sice má jen 807 m. n. m., ale zas na ní stoupáte od nuly. Záznam trasy (15 km) <a href="https://www.wikiloc.com/hiking-trails/pico-de-la-zarza-from-morro-jable-30661974">najdete na Wikiloc</a>. Na výstup jsme vyráželi v 9h ráno a naštěstí bylo chvílemi pod mrakem. Určitě si vezměte hodně vody a něco na hlavu, protože cestou je přesně nula míst, kde se dá schovat před sluncem. Auto jsme nechali zbytečně daleko, dalo by se docela dobře zaparkovat až tam, kde jsme se odpojili od silnice. Z vrcholu jsou super výhledy i na severní stranu ostrova.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/pico-de-la-zarza.jpg" alt="Pico de La Zarza" /></p>

<h2 id="cofete">Cofete</h2>

<p><a href="https://goo.gl/maps/CEyEJgMoNrP2">Cofete</a> je hezká pláž na severní straně ostrova. Kvůli silným proudům se tam nedá koupat. Jde tam buď dojet autem (pozor, je prašná cesta) nebo speciálním autobusem s pohonem 4x4 z Morro Jable. Vyjíždí z <a href="https://goo.gl/maps/b2oKkPpVddC2">Estación de Guaguas</a> (=autobusák). Je to linka <a href="http://tiadhe.com/en/line-111/">L111</a> a pozor, bere jen 18 lidí, takže tam buďte dřív.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/cofete-bus.jpg" alt="Cofete bus" /></p>

<p>Zpátky můžete jet buď tím stejným autobusem nebo se jako my můžete projít přes kopec (12 km). <a href="https://www.wikiloc.com/hiking-trails/from-cofete-to-morro-jable-30663278">Trasu jsem opět dal na Wikiloc</a>.</p>

<p><img src="/data/2018/2018-11-18-fuerteventura-kam-na-vylety/cofete.jpg" alt="Cofete - cesta přes kopec" /></p>

<h2 id="islote-de-lobos">Islote de Lobos</h2>

<p>Islote de Lobos je malý ostrůvek kousek od Corrajela, dá se tam dojet výletní lodí. Tohle je jediná věc z celého článku, kterou jsme si nechali na někdy příště, ale uvádím ji tu pro úplnost.</p>

<h1 id="z%E3%A1v%E4%9Br">Závěr</h1>

<p>Na to, že jsme tam nebyli tak dlouho, jsme toho stihli hrozně moc. Hodně k tomu pomohlo to půjčené auto, protože jsme mohli jen i na krátký výlet později odpoledne, což by autobusem bylo mnohem komplikovanější. A těch 14 dnů bylo tak akorát, jinak by to bylo moc hektické.</p>

<p>Pokud se budete chystat na Fuerteventuru a budete mít více času, tak doporučuji alespoň týden z toho strávit <a href="/lanzarote-kam-na-vylety/">na Lanzarote, tam je toho taky spoustu k vidění</a>.</p>

<p>A pokud se chystáte do <a href="/las-palmas-gran-canaria-kam-na-vylety/">Las Palmas na Gran Canarii, tak mrkněte na moje tipy na výlety</a>.</p>

<h2 id="outdoorvisit-outdoor-tours">OutdoorVisit outdoor tours</h2>

<p>Pokud chcete zkusit něco netradičního, tak doporučuji mrknout na <a href="https://www.outdoorvisit.com/canary-islands/fuerteventura/?utm_source=martinhujer.cz&amp;utm_medium=web&amp;utm_campaign=blog_fuerteventura_post">outdoorové zážitky a výlety na Fuerteventuře</a>.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Use different Google Analytics ID by domain in Google Tag Manager]]></title>
            <link href="https://blog.martinhujer.cz/use-different-google-analytics-id-by-domain-in-tag-manager/"/>
            <updated>2018-08-26T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/use-different-google-analytics-id-by-domain-in-tag-manager/</id>
            <content type="html"><![CDATA[<p>When setting up Google Analytics (or Facebook Pixel) in the Google Tag Manager the typical approach is to put the UA-code or the Pixel ID into the <em>Constant</em> Variable. And that ID is then used in the GA/Facebook <em>Tag</em>.</p>

<p>But soon after launch the people from Marketing will start complaining that some strange orders and conversions are appearing in the Google Analytics.</p>

<p>What happened? Apart from real orders, also the orders made in testing and dev environments are sent there.</p>

<p>There is a better way. 
<strong>You can easily use different UA codes in production and in testing environments.</strong>
In the rest of the article I will guide you through setting it up.</p>

<h2 id="analysis">Analysis</h2>

<p>It is clear that we want to use testing UA code in dev/test environments, but apart from that we also want to use it when testing the Google Tag Manager configuration itself with <em>Preview feature</em> (even on production website).</p>

<p>The decision process for the UA code goes like this:</p>

<ul>
<li><strong>Are we running in Debug mode?</strong>

<ul>
<li><strong>YES</strong>: use test ID</li>
<li><strong>NO</strong>:</li>
<li><strong>Are we on production domain?</strong>

<ul>
<li><strong>YES</strong>: use real ID</li>
<li><strong>NO</strong>: use test ID</li>
</ul></li>
</ul></li>
</ul>

<h2 id="preparation">Preparation</h2>

<ol>
<li><p>Go to Google Tag Manager and create two <em>Constant</em> Variables:</p>

<ul>
<li><code>GA_ID_DEV</code> with the testing ID</li>
<li><code>GA_ID_PROD</code> with the production ID</li>
</ul></li>
<li><p>In the Variables section in <em>Built-In Variables</em> enable <code>Debug Mode</code> and <code>Page Hostname</code> variables.</p></li>
</ol>

<h2 id="setting-up-the-hostname-detection">Setting up the hostname detection</h2>

<ol>
<li>Create a Variable of type <code>Lookup Table</code> and name it <code>GA_ID_BY_HOSTNAME</code></li>
<li><em>Input Variable</em> is <code>{{Page Hostname}}</code></li>
<li>Click <em>Add row</em></li>
<li>Put your production domain into the <em>Input</em> field (just the domain without <code>https://</code> and the trailing <code>/</code>)</li>
<li>Put <code>{{GA_ID_PROD}}</code> into the <em>Output</em> field</li>
<li>Check <em>Set default value</em> checkbox</li>
<li>Put <code>{{GA_ID_DEV}}</code> to the <em>Default value</em> field</li>
</ol>

<p>It should look like this:
<img src="/data/2018/2018-08-26-use-different-code-id/01-by-hostname.png" alt="GA_ID_BY_HOSTNAME variable configuration" /></p>

<p>By defining only the production domain and using <em>default value</em> for anything else, we handle any testing or dev environment.</p>

<h2 id="setting-up-the-debug-environment-detection">Setting up the Debug environment detection</h2>

<p>If you look back into the <em>Analysis</em> chapter, we have covered the <em>Are we on production domain?</em> part. Now we will cover the <em>Are we running in Debug mode?</em>.</p>

<ol>
<li>Create a Variable of type <code>Lookup Table</code> and name it <code>GA_ID</code></li>
<li><em>Input Variable</em> is <code>{{Debug Mode}}</code></li>
<li>Click <em>Add row</em></li>
<li>Put <code>true</code> into the <em>Input</em> field and <code>{{GA_ID_DEV}}</code> into the <em>Output</em> field</li>
<li>Click <em>Add row</em> again</li>
<li>Put <code>false</code> into the <em>Input</em> field and <code>{{GA_ID_BY_HOSTNAME}}</code> into the <em>Output</em> field</li>
</ol>

<p>It should look like this:
<img src="/data/2018/2018-08-26-use-different-code-id/02-by-debugmode.png" alt="GA_ID variable configuration" /></p>

<p>You might have noticed that we have used the variable <code>GA_ID_BY_HOSTNAME</code> which we prepared in previous step.</p>

<h2 id="setting-up-the-google-analytics-tag">Setting up the Google Analytics Tag</h2>

<p>With all those variables prepared, you can set up the Google Analytics tag as usual. But when creating the <code>Google Analytics Settings</code>, put <code>{{GA_ID}}</code> into the <em>Tracking ID</em> field as in the following picture. It will be resolved to correct UA code depending on the environment.</p>

<p><img src="/data/2018/2018-08-26-use-different-code-id/03-tag-settings.png" alt="Google Analytics Settings variable" /></p>

<p>That's it!</p>

<h2 id="conclusion">Conclusion</h2>

<p>Apart from Google Analytics ID, you can use this guide to set up Facebook Pixel ID or any other system where you can easily create different IDs for different environments.</p>

<p>Are you using similar approach? Or did you find a better way? Let me know in the comments!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Consistence brings consistency to the PHP]]></title>
            <link href="https://blog.martinhujer.cz/consistence-brings-consistency-to-the-php/"/>
            <updated>2018-02-06T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/consistence-brings-consistency-to-the-php/</id>
            <content type="html"><![CDATA[<p><strong>In the article I describe the <a href="https://github.com/consistence/consistence/">Consistence library</a> that aims to bring consistency to PHP applications.</strong></p>

<p>There is no argument, that PHP can sometimes be <em>a bit</em> inconsistent about naming stuff and maintaining order of parameters for related functions. Also, in some cases it is not strict and allows you to use the language and the functions in a wrong way. Sometimes you get <code>false</code> as a return value where an exception would be appropriate.</p>

<p>I really like the idea of code being strict because it prevents errors in the application. E.g. <code>strpos</code> usually returns <code>int</code>, but it returns <code>false</code> when the <code>$needle</code> was not found. It would be much better to throw <code>SubstringNotFoundException</code> in that case.</p>

<p>Consistence provides opinionated strict wrappers with better error handling and consistent naming and consistent parameters order.</p>

<blockquote>
  <p><em><strong>Disclaimer:</strong> I haven't created the library, but I find it useful and I hope you will as well. It is one of the packages I use on every project.</em></p>
</blockquote>

<p>Let's dive into it.</p>

<h2 id="use-enums-for-better-type-safety">Use Enums for better type safety</h2>

<p>It's a good practice to use constants instead of passing magic numbers (or magic strings) around. But you still pass them as a string, so there is nothing that prevents you from passing any other arbitrary string:</p>

<pre><code class="php">&lt;?php
class BodyType
{
    const SUV = 'suv';
    const COMBI = 'combi';
    const HATCHBACK = 'hatchback';
    const CABRIO = 'cabrio';
    // ... 
}

function createCar(string $bodyType) {
    // do something with $bodyType
}

$car = createCar(BodyType::CABRIO);
$car = createCar('doubledecker'); // unexpected things can happen
</code></pre>

<p>Consistence provides an <a href="https://github.com/consistence/consistence/blob/master/docs/Enum/enums.md">enum implementation</a>. When you extend the class from <code>Enum</code>, all constants are automatically treated as possible enum values:</p>

<pre><code class="php">&lt;?php
class BodyType extends \Consistence\Enum\Enum
{
    const SUV = 'suv';
    const COMBI = 'combi';
    const HATCHBACK = 'hatchback';
    const CABRIO = 'cabrio';
    // ...
}

function createCar(BodyType $bodyType) {
    echo $bodyType-&gt;getValue(); // you can use `getValue()` method to access the internal enum value
}

// use get() to get an instance of enum
$cabrioBodyType = BodyType::get(BodyType::CABRIO);

// It is a regular class instance
var_dump($cabrioBodyType instanceof BodyType); // bool(true)

// You always get the same instance, so you can compare them
var_dump(BodyType::get(BodyType::CABRIO) === BodyType::get(BodyType::CABRIO)); // bool(true)

// Type-hint checks work as expected
$car = createCar($cabrioBodyType); 

// Argument 1 passed to createCar() must be an instance of BodyType, string given
$car = createCar('doubledecker'); 
</code></pre>

<p>Enums also make it easier to write an actual code. Compare the following examples. When you want to instantiate the class from the first one, you have to dig into the documentation to check what are the allowed values:</p>

<pre><code class="php">&lt;?php
class Car
{
    public function __construct(
        string $bodyType,
        string $transmissionType,
        string $engineType,
        string $fuelType
    )
    {}
}
</code></pre>

<p>In the second one, you just start typing <code>BodyType::get(BodyType::</code> and then choose from the suggested values:</p>

<pre><code class="php">&lt;?php
class Car
{
    public function __construct(
        BodyType $bodyType,
        TransmissionType $transmissionType,
        EngineType $engineType,
        FuelType $fuelType
    )
    {}
}
</code></pre>

<p>There are <a href="https://github.com/consistence/consistence-doctrine">Doctrine</a> and <a href="https://github.com/consistence/consistence-doctrine-symfony/">Doctrine + Symfony</a> integrations which allow you to use Enums in Doctrine entities:</p>

<pre><code class="php">&lt;?php
use Consistence\Doctrine\Enum\EnumAnnotation as Enum;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity()
 */
class Car
{
    /**
     * @Enum(class=BodyType::class)
     * @ORM\Column(type="string_enum")
     * @var BodyType
     */
    private $bodyType;

    public function __construct(BodyType $bodyType)
    {
        $this-&gt;bodyType = $bodyType;
    }

    public function getBodyType(): BodyType
    {
        return $this-&gt;bodyType;
    }
}
</code></pre>

<p>If you need to represent multiple values, have a look at the <a href="https://github.com/consistence/consistence/blob/master/docs/Enum/multi-enums.md">MultiEnums</a>.</p>

<p><em>If the Consistence only provided the Enums, it would be enough reason for me to use it.</em></p>

<h2 id="use-%60objectprototype%60-to-disable-magic-methods">Use <code>ObjectPrototype</code> to disable magic methods</h2>

<p>In PHP you can write to undefined object properties. If the property is not defined and you assign a value to it, it is created in runtime.</p>

<p>I think it is a bad idea because it can hide subtle bugs and typos. Consider the following example, where I made a several mistakes in the code, but PHP almost did not complain.</p>

<pre><code class="php">&lt;?php
class MyClass
{
    public $foo;
}

$a = new MyClass();
$a-&gt;boo = 'bb'; // I made a typo, but PHP is fine with that

var_dump($a-&gt;foo);  // NULL
var_dump($a-&gt;boo);  // string(2) "bb"
var_dump($a-&gt;otherProperty);  // Notice:  Undefined property: MyClass::$otherProperty
</code></pre>

<p>If you want a more real-world example, consider this:</p>

<pre><code class="php">&lt;?php
$finalPrice = $product-&gt;price * $customer-&gt;distountRate;
</code></pre>

<p>There is a typo in a property name, so the <code>$finalPrice</code> would be <code>0</code>, because undefined property has <code>null</code> value which is converted to <code>0</code> and used in multiplication.</p>

<p>Consistence provides a straightforward way to mitigate this type of bugs. There is an <a href="https://github.com/consistence/consistence/blob/master/docs/Type/strict-types.md#strict-object"><code>ObjectPrototype</code></a> class which you can extend your classes from. If you try to assign or read something from an undefined property, an exception is thrown. Calling undefined methods throws an exception too. Those exceptions are not meant to be caught, but they should be fixed directly in your code.</p>

<pre><code class="php">&lt;?php
class MyClass extends \Consistence\ObjectPrototype
{
    public $foo;
}

$a = new MyClass();
$a-&gt;boo = 'bb'; // throws Consistence\UndefinedPropertyException

var_dump($a-&gt;foo); // NULL, but that does not matter, an exception would be thrown before
var_dump($a-&gt;boo); // throws Consistence\UndefinedPropertyException
var_dump($a-&gt;otherProperty); // throws Consistence\UndefinedPropertyException

$a-&gt;foo(); // throws Consistence\UndefinedMethodException
</code></pre>

<p>You're probably thinking, that using a base class for all classes is an awful code-smell!</p>

<p>I agree in general, but this case is different. If you consider the Consistence library to be an extension or augmentation of the standard PHP library, <code>ObjectPrototype</code> class is more like <code>Object</code> base class in Java. And nobody complains about it there.</p>

<p>The unseen advantage of this is that when you extend <code>ObjectPrototype</code>, you can't extend anything else, which is a good thing. You should be using composition as a code reuse mechanism anyway. In cases when the inheritance makes sense, you can use <code>ObjectMixinTrait</code> which enables the strict behaviour. Good example are the exceptions (they are objects too!):</p>

<pre><code class="php">&lt;?php
class MyCustomException extends \Exception
{
    use \Consistence\Type\ObjectMixinTrait;
}

$exception = new MyCustomException();
$exception-&gt;foo = 'a'; // throws Consistence\UndefinedPropertyException
</code></pre>

<p>Speaking of exceptions, there is a <a href="https://github.com/consistence/consistence/blob/master/src/exceptions/PhpException.php"><code>PhpException</code></a> which can be used as their base class. It has a shorter constructor without the mostly useless <code>$code</code> argument.</p>

<h2 id="strict-type-checking">Strict type checking</h2>

<p>PHP type-hints are powerful, but there are still a lot of things they can't check. You can put the detailed type info into the PHPDoc, but it is ignored at runtime. It only helps other developers and the IDE to better understand the code.</p>

<p>In the following example, IDE understands that the array contains <code>int</code> values, but PHP only checks that it is an <code>array</code>:</p>

<pre><code class="php">&lt;?php
/**
 * @param int[] $data
 */
function foo(array $data)
{
    var_dump($data);
}

foo([0, 1, 2]); // OK,
foo(['0', '1', '2']); // OK
foo(1); // not OK: Argument 1 passed to foo() must be of the type array, integer given
</code></pre>

<p>You can use <code>Type</code> class to manually check that the variable contains expected type:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\Type;

/**
 * @param int[] $data
 */
function foo(array $data)
{
    Type::checkType($data, 'int[]');

    var_dump($data);
}

foo([0, 1, 2]); // OK 
foo(['0', '1', '2']); // throws Consistence\InvalidArgumentTypeException: int[] expected,  [array] given

</code></pre>

<p><code>Type::checkType()</code> throws an exception when the type-check fails. If you want to throw the exception yourself, you can use <code>Type::hasType($data, 'int[]')</code> which returns <code>boolean</code> value.</p>

<p>Here are some examples what else you can use as an expected type:</p>

<ul>
<li><code>object</code>: useful in &lt; PHP 7.2</li>
<li>Union types: <code>int|string</code> or <code>int[]|string[]</code></li>
<li>Collection of objects: <code>Product::class . '[]'</code></li>
<li>Array keys type: <code>int:string[]</code> (array of <code>string</code> values indexed by <code>int</code> keys)</li>
</ul>

<h2 id="consistent-array-manipulation-functions">Consistent array manipulation functions</h2>

<p>Standard PHP functions for array manipulation aren't very consistent or strict:</p>

<ul>
<li>most of them are not using strict comparison - they do automatic type conversion</li>
<li>most of them do not accept callbacks to create more complicated logic</li>
<li><a href="http://php.net/array_filter">some</a> accept the source array as first parameter, <a href="http://php.net/array_map">some</a> as a second parameter</li>
</ul>

<p>Consistence provides <a href="https://github.com/consistence/consistence/blob/master/docs/Type/arrays.md">several array manipulation functions</a> in the <code>ArrayType</code> namespace. Let's have a look at the examples.</p>

<p>In the first example you can see how the implicit type conversion in <code>in_array</code> function can lead to unexpected results:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = ['1', '2'];

// automatic type conversion
in_array('1', $data); // bool(true)
in_array(1, $data); // bool(true) &lt;- unexpected result!
in_array(true, $data); // bool(true) &lt;- unexpected result!

// strict flag set to true
in_array('1', $data, true); // bool(true)
in_array(1, $data, true); // bool(false) &lt;- works as expected
in_array(true, $data, true); // bool(false) &lt;- works as expected

// ArrayType::containsValue() works as expected by default
ArrayType::containsValue($data, '1'); // bool(true)
ArrayType::containsValue($data, 1);  // bool(false)
ArrayType::containsValue($data, true);  // bool(false)
</code></pre>

<p>In this case you can get away with just making sure to always add <code>true</code> as a third parameter.</p>

<p>The code gets more complicated when you need more complex logic, e.g. you want to check if the array contains a value larger than 3. You can iterate through the array and determine if some value matches the condition:</p>

<pre><code class="php">&lt;?php
$data = [1, 2, 3, 4];

$result = false;
foreach ($data as $value) {
    if ($value &gt; 3) {
        $result = true;
        break;
    }
}
var_dump($result); // bool(true)
</code></pre>

<p>Consistence provides more succinct way of doing it with <code>containsValueByValueCallback()</code>, where you only need to write the actual business logic and not the repetitive boilerplate code:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = [1, 2, 3, 4];

$result = ArrayType::containsValueByValueCallback($data, function (int $value) {
    return $value &gt; 3;
});

var_dump($result); // bool(true);
</code></pre>

<p>I often use array filtering by callback:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = [1, 2, 3, 4];

$result = ArrayType::filterValuesByCallback($data, function (int $value): bool {
    return $value &gt; 2;
});
var_dump($result); // [3, 4]
</code></pre>

<p>And mapping values by callback:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = [1, 2, 3, 4];

// map values using callback
$result = ArrayType::mapValuesByCallback($data, function (int $value) {
    return $value * 2;
});
var_dump($result); // [2, 4, 6, 8]
</code></pre>

<p>Sometimes it may be convenient to use <code>filterByCallback()</code> and <code>mapByCallback()</code> that pass both <em>key</em> and <em>value</em> to the callback function (they use the <a href="https://github.com/consistence/consistence/blob/master/docs/Type/arrays.md#keyvaluepair"><code>KeyValuePair</code></a> value object internally).</p>

<p>Did you know, that <code>array_unique()</code> is always comparing loosely? Therefore, I prefer to use strict <code>ArrayType::uniqueValues()</code>:</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = [1, '1', true];

var_dump(array_unique($data)); // ['1']
var_dump(ArrayType::uniqueValues($data)); // [1, '1', true]
</code></pre>

<p>Last thing I want to show you regarding the arrays is the <code>find</code>/<code>get</code> convention. If the method name starts with <code>find</code> (e.g. <code>findValue()</code>), it can either return the value or <code>null</code>. But if the method name starts with <code>get</code> (e.g. <code>getValue()</code>), it either returns the value or throws an exception.</p>

<pre><code class="php">&lt;?php
use Consistence\Type\ArrayType\ArrayType;

$data = [1, 2, 3, 4];

// we want to get a value at key

ArrayType::findValue($data, 3); // int(4)
ArrayType::findValue($data, 5); // null

ArrayType::getValue($data, 3); // int(4)
ArrayType::getValue($data, 5); // throws ElementDoesNotExistException
</code></pre>

<p>And there is more, <a href="https://github.com/consistence/consistence/blob/master/src/Type/ArrayType/ArrayType.php">have a look at the available methods</a> for yourself.</p>

<h2 id="regex">Regex</h2>

<p>This chapter is going to be a short one. Consistence provides a <code>preg_match</code> wrapper with more sensible API and exceptions error handling:</p>

<pre><code class="php">&lt;?php
use Consistence\RegExp\RegExp;

// you can either check if the string matches the pattern
RegExp::matches('abc', '/bc+/'); // bool(true)

// or get the matches back
$matches = RegExp::match('abcde', '/[b-d]+/');
var_dump($matches); // ['bcd']
</code></pre>

<h2 id="phpstan-integration">PHPStan integration</h2>

<p>There is a static analysis tool called <a href="https://github.com/phpstan/phpstan">PHPStan</a> (you can read more about it in <a href="https://medium.com/@ondrejmirtes/phpstan-2939cd0ad0e3">Ondřej's blogpost</a>.</p>

<p>I have created <a href="https://github.com/mhujer/phpstan-consistence">PHPStan rules for the Consistence library</a>. There is one which checks that the class extends <code>ObjectPrototype</code> or uses <code>ObjectMixinTrait</code>. And second which checks that you are using safer Consistence array manipulation functions instead of the plain native PHP ones.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In the article I've described the most interesting parts of the <a href="https://github.com/consistence/consistence/">Consistence</a> library. My favourite are enums and strict types everywhere.</p>

<p>If you are not using the Consistence library yet, <a href="https://github.com/consistence/consistence/#consistence">give it a try</a>!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Málaga - co vidět a kam na výlety? Podruhé.]]></title>
            <link href="https://blog.martinhujer.cz/malaga-podruhe/"/>
            <updated>2018-01-27T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/malaga-podruhe/</id>
            <content type="html"><![CDATA[<p>Letos v lednu (12. - 26.1.) jsem znovu vyrazil do Málagy za teplem. Našel jsem spoustu dalších zajímavých věcí, které stojí za to navštívit. Navazuji na <a href="/malaga/">předchozí článek o Málaze</a>, takže si určitě pročtěte i ten.</p>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/nocni-malaga.jpg" alt="Noční Málaga" /></p>

<h2 id="doprava">Doprava</h2>

<ul>
<li><p>Uber v Málaze nefunguje, ale můžete místo něj použít Cabify.</p></li>
<li><p>Ve městě jezdí spoustu autobusů, spoje jdou vyhledávat v Google Maps. Nejpohodlnější je koupit si kartu na autobus (€1.7) a dobít si 10 jízdami za €8.30. Kartu jsem kupoval v <a href="https://goo.gl/maps/nvS6DsJV6Lp">prodejně v centru</a>.</p></li>
<li><p>Teoreticky by na tu kartu na autobus mělo jít za €5 aktivovat možnost půjčování kol <a href="http://malagabici.malaga.eu/webpublica/index.html">Malagabici</a>. Nedá se to vyřešit v té prodejně v centru (kde jsem kupoval kartu), ale je potřeba dojít do kanceláře na <a href="https://goo.gl/maps/B9sQMbAk5ik">Estación de María Zambrano</a>. Jo a prý tam jsou asi jen do 15 h (nemám vyzkoušeno).</p></li>
<li><p>Z letiště i zpátky na letiště jsem jel vlakem, lístek stojí 1.8€. Zpátky jsem letěl v 7:00 ráno s Ryanairem a v pohodě stačilo jet vlakem v 5:20. Pokud byste chtěli větší rezervu, tak bych doporučoval to Cabify.</p></li>
</ul>

<h2 id="co-nav%E5%A1t%E3%ADvit">Co navštívit</h2>

<ul>
<li><strong><a href="https://goo.gl/maps/KY7EYBZPeRo">Cementerio Inglés de Málaga</a></strong> - anglikánský hřbitov, stojí za návštěvu. Pozor, mají jen do 15 h. Vstup 4€.</li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/english-cemetery.jpg" alt="Enflish Cemetery" /></p>

<ul>
<li><p><strong><a href="https://goo.gl/maps/6fdFhjN2R362">Museo de Málaga</a></strong> - parádní muzeum. V prvním patře umění (vynechal jsem), v druhém patře archeologie (super). Vstup zdarma, zavřeno v pondělí.</p></li>
<li><p><strong><a href="https://goo.gl/maps/jZsESU6z89N2">Parque de Málaga</a></strong> - park v centru, víceméně je to botanická zahrada s fontánkami.</p></li>
<li><p><strong><a href="https://goo.gl/maps/gpVYjhu8N4F2">Parque del Oeste</a></strong> - obrovský park v Huelinu, je v něm obrovské jezírko s fontánou a želvami, palmy, papoušci, pštrosi a tak.</p></li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/park.jpg" alt="Parque del Oeste" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/Fz6mMb15rBR2">Plaza de toros de La Malagueta</a></strong> - býčí aréna, myslím že se tam něco děje jen v srpnu. Zvenku to moc zábavné není. Ale je na ní super výhled shora. Viz další tip.</li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/malagueta.jpg" alt="Malagueta" /></p>

<ul>
<li><p><strong><a href="https://goo.gl/maps/7gaj7Au1stp">Mirador de Gibralfaro</a></strong> - na tuhle vyhlídku narazíte cestou na Castillo de Gibralfaro. Je z ní super výhled na město, moře i arénu. Zajímavost je, že většina lidí, co tam dorazí, se nejdříve otočí zády a fotí selfie místo toho, aby se koukali. Z vyhlídky kromě přímé cesty na hrad vede i trošku okružní turistická, odkud je ještě <a href="https://mapy.cz/s/2lkbz">lepší výhled na Malaguetu</a> než z té vyhlídky. A cestu na hrad to prodlouží jen o pár set metrů. Tady místo Google Maps doporučuji offline Mapy.cz, kde je zanesená i tahle turistická trasa.</p></li>
<li><p><strong><a href="https://goo.gl/maps/enbGCeSWXWG2">Mirador de Alcazaba</a></strong> - vyhlídka před Alcazabou. Jde se tam po schodech za vlevo za vstupem do Teatro Romano. Zadarmo.</p></li>
<li><p><strong><a href="https://goo.gl/maps/NbhSr75V6Y32">Teatro Romano</a></strong> - římský amfiteátr. Má docela zajímavou historii, objevili ho až někdy v půlce 20. století, když dělali terénní práce u dostavěného <em>Casa de Cultura</em>. Ten nakonec zbourali (v roce 1995), protože zjistili, že kus toho amfiteátru je pod ním. A Teatro Romano otevřeli k prohlídkám až v roce 2011.</p></li>
<li><p><strong><a href="https://goo.gl/maps/7cGLNoWayFz">Alcazaba</a></strong> - arabská pevnost, hezky zachovalá. Vstupné myslím 2.5€.</p></li>
<li><p><strong><a href="https://goo.gl/maps/5rBJZmTGdsM2">Mercado de Huelin</a></strong> - trh s ovocem, zeleninou, masem, rybami a mořskými plody. Typicky tam chodí jen místní.</p></li>
<li><p><strong><a href="https://goo.gl/maps/ykA3NQMye5T2">La Taberna del Pintxo</a></strong> - tapas bar, kde hlavní roli hrají "Pintxos" (čti <em>pinčos</em>). Jsou to vlastně obložené chlebíčky, ale hodně vymazlené. A mají "párátko". Funguje to tak, že si sami chodíte na bar a vybíráte si z nabídky chlazených. A zároveň nosí z kuchyně tácy s teplými pintxos, prochází mezi stoly a pokud chcete, tak si nějaké vezmete. A při placení vám spočítají, kolik máte "párátek". Jo a mají tam na výběr i minidortíky.</p></li>
<li><p><strong><a href="https://goo.gl/maps/maeTtNBpdTC2">Santa Canela Café-Crepería</a></strong> - výborná hipster kavárna ve centru. Kromě standardních espressových káv umí i různé filtrované (Chemex, V60, aeropress). A mají v nabídce i různé druhy kávy (zrnek).</p></li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/santa-canela.jpg" alt="Kavárna Santa Canela" /></p>

<ul>
<li><p><strong><a href="https://goo.gl/maps/7UR5o9T43pH2">El Último Mono Juice &amp; Coffee</a></strong> - dobrá káva v centru. Nabízejí i smoothie apod.</p></li>
<li><p><strong><a href="https://goo.gl/maps/erkhecitmJC2">La Esperanza de los Ascurra</a></strong> - jedna z mnoha restaurací. Tuhle doporučila Airbnb hostitelka z bytu, kde bydlela ségra s partou, když přijeli na víkend do Málagy. Mají fajn nabídku mořských plodů (třeba chobotnici - pulpo). Takže pokud stejně jako já máte problém si vybrat kam jít, tak můžete třeba sem.</p></li>
<li><p><strong><a href="https://goo.gl/maps/GqqJ9u8JTQA2">Café Club Carambuco</a></strong> - fajn kavárna v Huelinu. Mají dobrou kávu, zapečené bagety a taky různé dortíky, byl jsem tam několikrát.</p></li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/carambuco.jpg" alt="Café Club Carumbuco" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/FJXvgj59tuv">Desembocadura del Guadalhorce</a></strong> - epická přírodní rezervace s mokřady. Mají tam dokonce pozorovatelny na sledování ptáků. Za mě jedna z top věcí v Málaze. Akorát to je trochu daleko a cestou si trochu zajdete, protože tam kde by se to hodilo, není most. Opět doporučuju Mapy.cz, kde jsou vyznačené i jednotlivé pozorovatelny. Nejlepší byla <a href="https://mapy.cz/s/2lkRb">Observatorio Laguna Grande</a>.</li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/rezervace.jpg" alt="Výhled na lagunu v Desembocadura del Guadalhorce" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/x4QXMGXgdBx">Monte San Antón</a></strong> - baví mě najít nějaký kopec a vylézt na něj. Tady jsem našel jeden, na který se dá docela hezky dojít, je to jen 500 výškových metrů. Dojel jsem autobusem <a href="https://goo.gl/maps/ZamQanDAWz12">dole pod kopec</a> a vyšlápnul si to nahoru. Část cesty je skrz hodně pěknou vilovou čtvrť. Nahoru a dolů mi to zabralo 3 h včetně půlhodinové svačiny a rozhlížení se nahoře. Cestou se jde skrz hezkou vilovou čtvrť. Prý je to top místo, kde se dá v Málaze bydlet, domy stojí od milionu eur výš. <a href="https://www.wikiloc.com/hiking-trails/malaga-san-anton-22221191">Záznam trasy na Wikiloc</a>. (na fotce je výhled na Málagu)</li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/vyhled-ze-san-anton.jpg" alt="Výhled na Málagu ze San Antón" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/Wu6XC2xMpqr">Restaurante Hermanos Muñoz</a></strong> - když jsem sešel dolů z kopce, tak jsem dostal chuť dát si něco dobrého. Vybral jsem tuhle restauraci a bylo to super. Měl jsem rosadu, což je nějaká ryba. A hlavně jsem zkusil <em>espeto de sardinas</em>, což jsou sardinky pečené na ohni napíchnuté na tyčce. Jí se tak, že oloupete maso z obou stran páteře (jí se i ta opečená kůže) a necháte hlavu, ocas a páteř.</li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/sardinky-before.jpg" alt="Sardinky - before" /></p>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/sardinky-after.jpg" alt="Sardinky - after" /></p>

<ul>
<li><p><em><strong>Chiringuito</strong></em> je obecný název pro restauraci/stánek s jídly z ryb a mořských plodů u pláže. Ty sardinky typicky mají ve všech.</p></li>
<li><p><strong><a href="https://goo.gl/maps/GcfumeK2uko">Merendero Casa Jose</a></strong> - chiringuito, kolem kterého jsem šel nekolikrát, takže jsem si tam poslední den zašel na oběd. Měl jsem grilované krevety a pak ještě sardinky a bylo to moc dobré. A domluvíte se tam i anglicky (já tedy mluvil španelsky, ale pak přišli nějací turisti a jeden číšník si to anglicky dával dost dobře).</p></li>
</ul>

<p><img src="/data/2018/2018-01-27-malaga-podruhe/merendero.jpg" alt="Krevety v Merendero Casa Jose" /></p>

<ul>
<li><p><strong><a href="https://goo.gl/maps/VJH6KkeKmsM2">Primark</a></strong> - naschvál jsem si sebou vezl méně triček a radši jsem si koupil čtyři jednobarevná bavlněná v Primarku po 2€ za kus.</p></li>
<li><p><strong><a href="https://goo.gl/maps/FHfUjaEhKxL2">Decathlon</a></strong> - stejně tak jsem si sebou nebral tepláky na doma a koupil jsem si je tady v Decathlonu. Plánoval jsem si totiž stejně pořídit nové a takhle je povezu jen jednu cestu. Jo a funguje tu Decathlon kartička z českého Decathlonu (díky <a href="https://play.google.com/store/apps/details?id=cz.tomatolabs.portmonka&amp;hl=en">Portmonka</a>).</p></li>
<li><p><strong><a href="https://goo.gl/maps/r3uCze6TSMR2">Informační centrum</a></strong> v centru - doporučuji si dojít pro mapu, kde jsou vyznačené různé památky, případně si nechat něco doporučit. Ale s Google Maps si klidně vystačíte.</p></li>
</ul>

<h2 id="zaj%E3%ADmavosti">Zajímavosti</h2>

<ul>
<li><p>od 22 h do 8 h se nesmí prodávat alkohol jinde než v restauracích a barech. Takže by vám večerce neměli prodat láhev tvrdého. Neměli by.</p></li>
<li><p>Pokud budete v Málaze poprvé, tak můžete vyzkoušet nějakou <em>free guided tour</em>. Obecně to funguje tak, že si nějakou najdete, zúčastníte se a pak jim něco zaplatíte podle toho, jak jste byli spokojení. (nemám vyzkoušeno)</p></li>
<li><p>Jedno odpoledne se ze slunečného dne během chvíle udělala hustá mlha. Hledal jsem a říká se tomu <a href="http://malagaenelcorazon.com/niebla-taro-en-malaga/">mlha Taró</a>.</p></li>
<li><p>Výběry z většiny bankomatů stojí kolem 2€ navíc se zahraniční kartou (i s <a href="/revolut-karta/">Revolut kartou</a>). Ale kupodivu Unicaja je má (zatím) zdarma, takže hledejte tu.</p></li>
</ul>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Keep your YAML files sorted with YAML sort checker]]></title>
            <link href="https://blog.martinhujer.cz/yaml-sort-checker/"/>
            <updated>2018-01-17T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/yaml-sort-checker/</id>
            <content type="html"><![CDATA[<p>Last year I've created a PHP tool <a href="https://github.com/mhujer/yaml-sort-checker">YAML file sort checker</a> that checks that YAML files in project are sorted alphabetically.</p>

<h2 id="why-should-you-sort-everything-alphabetically%3F">Why should you sort everything alphabetically?</h2>

<p>You can prevent unnecessary merge conflicts if you keep everything sorted. You should sort not only YAML files, but also <code>composer.json</code> (<code>require</code>, <code>require-dev</code> and <code>scripts</code> sections), <code>use</code> in PHP classes and any PHP array where order is not significant.</p>

<p>Typical situation is when two developers register a new service in <code>services.yml</code>. If they both add it to the end, it will inevitably lead to a merge conflict. However, when the services are alphabetically sorted, the probability of merge conflict is much lower, because the services will be probably added to different places and therefore won't clash.</p>

<p>(This specific example got better with new DI improvements in recent Symfony versions, where you don't need to register that many services manually)</p>

<p><strong>Tip:</strong> You can use AlphabeticallySortedUses sniff from <a href="https://github.com/slevomat/coding-standard#slevomatcodingstandardnamespacesalphabeticallysorteduses-">Slevomat Coding Standard</a> to check that <code>use</code> in PHP class are sorted.</p>

<h2 id="installation">Installation</h2>

<p>YAML file sort checker is installed through Composer:</p>

<pre><code class="bash">composer require --dev mhujer/yaml-sort-checker
</code></pre>

<h2 id="configuration">Configuration</h2>

<p>You have to create a configuration file <code>yaml-sort-checker.yml</code> in the project root directory. Then list all files that should be checked in it.</p>

<p>The initial config may look like this:</p>

<pre><code class="yaml">files:
    app/config/services.yml:
        depth: 2

    yaml-sort-checker.yml:
</code></pre>

<p>It checks <code>services.yml</code> and itself. The <code>services.yml</code> will be validated only two levels deep.</p>

<p>Sometimes you may want to exclude some keys from validation. It can be accomplished by using <code>excludedKeys</code> option. You can see how the exclusion works in the example bellow:</p>

<pre><code class="yaml">files:
    app/config/config_prod.yml:
        excludedKeys:
            monolog:
                handlers:
                    main:
                        - type
                    nested:
                        - type

    app/config/config_test.yml:
        excludedKeys:
            0: imports
</code></pre>

<h2 id="run-the-checker">Run the checker</h2>

<p>After you have created a configuration file, you can run the checker:</p>

<pre><code class="bash">vendor/bin/yaml-sort-checker
</code></pre>

<h2 id="phpstorm-integration">PHPStorm integration</h2>

<p>It is possible to integrate YAML sort checker with PHPStorm using File Watchers. It is described in the <a href="https://github.com/mhujer/yaml-sort-checker#phpstorm-integration">project README on github</a> so I won't duplicated it here.</p>

<h2 id="conclusion">Conclusion</h2>

<p>It is a good practice to keep most of the things sorted alphabetically to prevent merge conflicts. However, it can be a tedious task to do manually. Luckilly the YAML files can be automatically checked with <a href="https://github.com/mhujer/yaml-sort-checker">YAML file sort checker</a>.</p>
]]></content>
        </entry>
    </feed>