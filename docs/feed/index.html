<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[Martin Hujer blog]]></title>
    <link href="https://blog.martinhujer.cz/feed/" rel="self"/>
    <link href="https://blog.martinhujer.cz/"/>
    <updated>2017-11-03T20:15:40+00:00</updated>
    <id>https://blog.martinhujer.cz/</id>
            <author>
            <name><![CDATA[Martin Hujer]]></name>                    </author>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[PHP 7.2 is due in November. What&#039;s new?]]></title>
            <link href="https://blog.martinhujer.cz/php-7-2-is-due-in-november-whats-new/"/>
            <updated>2017-09-07T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/php-7-2-is-due-in-november-whats-new/</id>
            <content type="html"><![CDATA[<blockquote>
  <p>I've published <a href="https://www.zdrojak.cz/clanky/jake-novinky-prinese-php-7-2/">the Czech translation of the article on Zdroják.cz</a>.</p>
</blockquote>

<p>PHP 7.2 is planned to be released on 30th November 2017 (see <a href="https://wiki.php.net/todo/php72#timetable">the timetable</a>). And it comes with two new security features in the core, several smaller improvements and some language legacy clean-ups. In the article, I will describe what the improvements and changes are. I read <a href="https://wiki.php.net/rfc#php_next_72">the RFCs</a>, discussions on <em>internals</em> and <a href="https://github.com/php/php-src/pulls">PRs on Github</a>, so you don't have to.</p>

<p><em>I'll update the article if there are any significant changes in PHP 7.2 until release.</em></p>

<p>You can try the pre-release version right now. Just download it using the links in the <a href="http://php.net/archive/2017.php#id2017-08-31-1">PHP 7.2.0 Release Candidate 1 Released</a>. I've been using it locally for development since the 7.2.0-beta1 without issues.</p>

<h2 id="rfc%3A-argon2-password-hash-link">RFC: Argon2 Password Hash (<a href="https://wiki.php.net/rfc/argon2_password_hash">link</a>)</h2>

<p><a href="http://php.net/password_hash"><code>password_hash</code></a> function has been available in PHP since 5.5. It was designed to be able to utilize different password hashing algorithms. But back then only <code>PASSWORD_BCRYPT</code> was available.</p>

<blockquote>
  <p><strong>IMPORTANT:</strong> If you are using <code>sha1()</code> or <code>md5()</code> for password hashing, please stop reading immediately and go fix your systems to use <code>password_hash()</code>. I recommend reading Michal's article <a href="https://www.michalspacek.com/upgrading-existing-password-hashes">Upgrading existing password hashes</a>.</p>
</blockquote>

<p>PHP 7.2 adds an option to use Argon2i algorithm with <code>PASSWORD_ARGON2I</code> constant:</p>

<pre><code class="php">password_hash('password', PASSWORD_ARGON2I)
</code></pre>

<p>Using <code>PASSWORD_BCRYPT</code> is still perfectly valid and safe option. Argon2i is just another option, which may become a default in the future.</p>

<p>Argon2i supports providing custom cost factors (like providing single <code>cost</code> factor to <code>bcrypt</code>):</p>

<pre><code class="php">$options = [
    'memory_cost' =&gt; PASSWORD_ARGON2_DEFAULT_MEMORY_COST,
    'time_cost' =&gt; PASSWORD_ARGON2_DEFAULT_TIME_COST,
    'threads' =&gt; PASSWORD_ARGON2_DEFAULT_THREADS,
];
password_hash('password', PASSWORD_ARGON2I, $options);
</code></pre>

<p>You should determine appropriate costs for Argon2i by experimenting on the target server (like you do with bcrypt <code>cost</code>).</p>

<p>It is also time to check your password column length! <code>PASSWORD_BCRYPT</code> generates 60 characters long hashes. <code>PASSWORD_ARGON2I</code> hash is 96 characters long. The <a href="http://php.net/password_hash"><code>password_hash</code> documentation</a> recommends columns length of 255 characters to accommodate any future hash (especially when using <code>PASSWORD_DEFAULT</code> as an algorithm):</p>

<blockquote>
  <p><em>It is recommended to store the result in a database column that can expand beyond 60 characters (255 characters would be a good choice).</em></p>
</blockquote>

<p>There is a good article about <a href="https://framework.zend.com/blog/2017-08-17-php72-argon2-hash-password.html">Protecting passwords with Argon2 in PHP 7.2</a> on Zend Framework blog.</p>

<p><strong>Note:</strong> Argon2i is available only if the PHP was compiled with <code>--with-password-argon2</code> flag. (It is included in Windows binaries available from php.net).</p>

<h2 id="rfc%3A-make-libsodium-a-core-extension-link">RFC: Make Libsodium a Core Extension (<a href="https://wiki.php.net/rfc/libsodium">link</a>)</h2>

<p>PHP 7.2 comes with cryptography library libsodium in the core. It was previously available through PECL. There is also a <a href="https://github.com/paragonie/sodium_compat">polyfill available</a> so you can start using it right now (it even supports PHP 5.2.4!).</p>

<p>I don't know much about the cryptography, but the single most important thing I know is this: <em>Don't invent your own cryptography!</em> (See <a href="https://security.stackexchange.com/a/18198">this StackExchange answer</a> for reasoning.).</p>

<p><strong>So just use the <code>sodium_</code> functions instead of implementing it by yourself.</strong></p>

<p>I recommend reading two following articles about upcoming improvements in PHP cryptography (both written by Scott Arciszewski, the author of the Libsodium RFC):</p>

<ol>
<li><p><a href="https://dev.to/paragonie/php-72-the-first-programming-language-to-add-modern-cryptography-to-its-standard-library">PHP 7.2: The First Programming Language to Add Modern Cryptography to its Standard Library</a></p>

<blockquote>
  <p><em>When version 7.2 releases at the end of the year, PHP will be the first programming language to adopt modern cryptography in its standard library.</em></p>
</blockquote></li>
<li><p><a href="https://paragonie.com/blog/2017/07/it-turns-out-2017-is-year-simply-secure-php-cryptography">It Turns Out, 2017 is the Year of Simply Secure PHP Cryptography</a> (by Scott Arciszewski as well).</p></li>
</ol>

<h2 id="other-interesting-changes">Other Interesting Changes</h2>

<h3 id="rfc%3A-object-typehint-link">RFC: Object typehint (<a href="https://wiki.php.net/rfc/object-typehint">link</a>)</h3>

<p>It will be possible to use <code>object</code> as parameter type and as a return type.</p>

<pre><code class="php">&lt;?php declare(strict_types = 1);

function foo(object $definitelyAnObject): object
{
    return 'another string';
}

foo('what about some string?');
// TypeError: Argument 1 passed to foo() must be an object, string given, called in...


foo(new \stdClass());
// TypeError: Return value of foo() must be an object, string returned

</code></pre>

<p><code>object</code> becomes a keyword in 7.2, so make sure you are not using it as a name for a class, interface or trait. It was a <a href="http://php.net/manual/en/reserved.other-reserved-words.php">soft-reserved word since PHP 7.0</a>.</p>

<p>It is useful mainly for libraries (ORMs, DI containers, serializers, <a href="https://externals.io/message/96554#96586">and others</a>). But it may help clean up some of your code as well. In our codebase, it will allow us to improve the helper method used in tests:</p>

<pre><code class="php">class TestUtils
{

    /**
     * @param object $object
     * @param string $propertyName
     * @param mixed $value
     */
    public static function setPrivateProperty($object, string $property, $value): void
    {
        if (!is_object($object)) {
            throw new \Exception('An object must be passed');
        }
</code></pre>

<p>Will be simplified to this:</p>

<pre><code class="php">class TestUtils
{
    public static function setPrivateProperty(object $object, string $property, $value): void
    {
</code></pre>

<h3 id="rfc%3A-parameter-type-widening-link">RFC: Parameter Type Widening (<a href="https://wiki.php.net/rfc/parameter-no-type-variance">link</a>)</h3>

<p>With this change, it is possible to omit the parameter type declaration in the child classes. I know that may sound confusing, so let's have a look at the example:</p>

<pre><code class="php">&lt;?php declare(strict_types = 1);

class LibraryClass 
{
    public function doWork(string $input)
    {

    }
}

class UserClass extends LibraryClass
{
    public function doWork($input)
    {

    }
}

// PHP &lt;7.2.0
// Warning: Declaration of UserClass::doWork($input) should be compatible with LibraryClass::doWork(string $input) in …

// PHP 7.2.0+
// no errors
</code></pre>

<p>It would allow libraries to introduce scalar typehints without breaking subclasses created by the library users. But it is rather theoretical possibility because the library cannot do the same for the return types. And when the library is adding parameter typehints, it makes sense to add return types as well.</p>

<p>Omitting type hints in subclasses follows the <a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov substitution principle - LSP</a> because it widens the accepted types. But the subclass cannot omit return typehints, because that would widen the possible return types (and that is LSP violation).</p>

<p>This behaviour was also changed for abstract classes in separate RFC: <a href="https://wiki.php.net/rfc/allow-abstract-function-override">RFC: Allow abstract function override</a>.</p>

<h3 id="rfc%3A-counting-of-non-countable-objects-link">RFC: Counting of non-countable objects (<a href="https://wiki.php.net/rfc/counting_non_countables">link</a>)</h3>

<p>Did you know, that it is possible to count scalar values? Well, it does not really do much counting, it only returns 1 for scalars.</p>

<pre><code class="php">&lt;?php

var_dump(count(null)); // int(0)
var_dump(count(0)); // int(1)
var_dump(count(4)); // int(1)
var_dump(count('4')); // int(1)

</code></pre>

<p>Since PHP 7.2, it will begin emitting a warning:</p>

<pre><code>Warning: count(): Parameter must be an array or an object that implements Countable in /in/4aIl2 on line 3
</code></pre>

<p>I really like this change, because no one writes such code intentionally, but rather as a bug that needs fixing.</p>

<p>I guess that you may find some of those is your codebase as well - have a look at a less obvious example:</p>

<pre><code class="php">&lt;?php declare(strict_types = 1);

class Data
{
    /** @var string[] */
    private $data;

    public function addOne(string $item)
    {
        if (count($this-&gt;data) &gt;= 5) {
            throw new \Exception('too much data');
        }

        $this-&gt;data[] = $item;
    }
}

$data = new Data();
$data-&gt;addOne('item1');
$data-&gt;addOne('item2');
$data-&gt;addOne('item3');

// Warning: count(): Parameter must be an array or an object that implements Countable in ...
</code></pre>

<p>It will report a warning, because you are counting a <code>null</code> value in the <code>if</code>.</p>

<h3 id="rfc%3A-deprecations-for-php-7.2-link">RFC: Deprecations for PHP 7.2 (<a href="https://wiki.php.net/rfc/deprecations_php_7_2">link</a>)</h3>

<p>Can be also called <em>"Nikita Popov's language clean-up"</em> :-)</p>

<p>The following will throw a deprecation warning in PHP 7.2 and will be removed later (probably in 8.0). See <a href="https://wiki.php.net/rfc/deprecations_php_7_2">the RFC</a> for detailed explanation of each one:</p>

<ul>
<li><code>__autoload()</code> - use <a href="http://php.net/spl_autoload_register"><code>spl_autoload_register()</code></a> instead</li>
<li><code>$php_errormsg</code> - use <a href="http://php.net/error_get_last"><code>error_get_last()</code></a> instead</li>
<li><code>create_function()</code> - use closures instead</li>
<li><code>mbstring.func_overload</code> (ini setting) - use <code>mb_*</code> functions directly</li>
<li><code>(unset)</code> cast - this is not deprecating <code>unset($var)</code> but <code>$foo = (unset) $bar</code> which is equal to <code>$foo = null</code> (yes, strange one)</li>
<li><code>parse_str()</code> without second argument - directly creating variables when parsing query string is not something you should be doing (<code>register_globals</code> anyone?)</li>
<li><code>gmp_random()</code> - use <code>gmp_random_bits()</code> and <code>gmp_random_range()</code> instead</li>
<li><code>each()</code> - use <code>foreach</code> instead (it is more than 10 times faster)</li>
<li><code>assert()</code> with string argument - it is using <code>eval()</code> internally!</li>
<li><code>$errcontext</code> argument of error handler - use <code>debug_backtrace()</code> instead</li>
</ul>

<h2 id="smaller-changes">Smaller changes</h2>

<h3 id="rfc%3A-get_class-disallow-null-parameter-link">RFC: get_class() disallow null parameter (<a href="https://wiki.php.net/rfc/get_class_disallow_null_parameter">link</a>)</h3>

<p>Did you know, that <code>get_class()</code> without parameters returns the same value as <code>__CLASS__</code>? I didn't. But the RFC does not change this.</p>

<pre><code class="php">&lt;?php

class MyClass
{
    public function myInfo()
    {
        var_dump(get_class()); // string(7) "MyClass"
        var_dump(__CLASS__); // string(7) "MyClass"
    }
}

$a = new MyClass();
$a-&gt;myInfo();

var_dump(get_class($a)); // string(7) "MyClass"
</code></pre>

<p>The RFC deprecates calling it with <code>null</code> as parameter. Consider this example from the RFC. If the item is fetched from the repository and <code>$result</code> is not null, it will print the class name of the fetched object. But if it is null, <code>Foo</code> will be printed.</p>

<pre><code class="php">class Foo
{

    function bar($repository)
    {
        $result = $repository-&gt;find(100);

        echo get_class($result);
    }
}

// In 7.2: Warning: get_class() expects parameter 1 to be object, null given in ...
</code></pre>

<h3 id="rfc%3A-allow-loading-extensions-by-name-link">RFC: Allow loading extensions by name (<a href="https://wiki.php.net/rfc/load-ext-by-name">link</a>)</h3>

<p>If you configured the PHP extensions before 7.2, you had to use full filename in the <code>.ini</code> file:</p>

<p>On Windows:</p>

<pre><code class="ini">extension=php_mbstring.dll
</code></pre>

<p>On Linux:</p>

<pre><code class="ini">extension=mbstring.so
</code></pre>

<p>That's fine if you are using only one platform. But it gets a bit harder, if you need to write some automation scripts supporting multiple platforms. It was improved in 7.2 and now you can use this both on Linux and Windows:</p>

<pre><code class="ini">extension=mbstring
</code></pre>

<p>Legacy syntax is still supported, but it is recommended to use the new one.</p>

<h3 id="rfc%3A-deprecate-and-remove-bareword-unquoted-strings-link">RFC: Deprecate and Remove Bareword (Unquoted) Strings (<a href="https://wiki.php.net/rfc/deprecate-bareword-strings">link</a>)</h3>

<p>This is another step in making PHP safer to use. If you mistype a constant in 7.2, it will throw a warning instead of notice (and will throw an error in PHP 8.0).</p>

<p>Simplest example is this:</p>

<pre><code class="php">&lt;?php
var_dump(NONEXISTENT_CONSTANT);


// PHP 7.1
// Notice: Use of undefined constant NONEXISTENT_CONSTANT - assumed 'NONEXISTENT_CONSTANT' in …

// PHP 7.2
// Warning: Use of undefined constant NONEXISTENT_CONSTANT - assumed 'NONEXISTENT_CONSTANT' (this will throw an Error in a future version of PHP) in …
</code></pre>

<p>I really like the bug examples <a href="https://wiki.php.net/rfc/deprecate-bareword-strings">in the RFC</a> showing what it's aiming to prevent:</p>

<pre><code class="php">$foo = flase; // typo!
// ...
if ( $foo ) {
   var_dump($foo); // string(5) "flase"
}
</code></pre>

<p>And:</p>

<pre><code class="php">$found = false;
foreach ( $list as $item ) {
   if ( is_null($item) ) {
       contniue; // this statement issues a notice and does nothing
   }
   // lines assuming $item is not null
}
</code></pre>

<h3 id="rfc%3A-trailing-commas-in-list-syntax-link">RFC: Trailing Commas in List Syntax (<a href="https://wiki.php.net/rfc/list-syntax-trailing-commas">link</a>)</h3>

<p>It has <a href="https://3v4l.org/J8r9B">always been possible</a> to use trailing comma after last array item:</p>

<pre><code class="php">$foo = [
    'foo',
    'bar',
];
</code></pre>

<p>It is useful for creating clean diffs in VCS and makes adding new items to the list simple.</p>

<p>This RFC proposed adding an optional trailing comma to all list-like places:</p>

<ul>
<li>Grouped namespaces</li>
<li>Function/method arguments (declarations &amp; calls)</li>
<li>Interface implementations on a class</li>
<li>Trait implementations on a class</li>
<li>Class member lists</li>
<li>Inheriting variables from the parent scope in anonymous functions</li>
</ul>

<p>I especially hoped for method arguments declarations and calls. But it did not pass the vote (which needed 2/3 majority, as it is a language change).</p>

<p>Surprisingly, only the <em>"Grouped namespaces"</em> passed:</p>

<pre><code class="php">use Foo\Bar\{ 
    Foo,
    Bar, 
    Baz, 
}; 

// note the comma after "Baz"
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>PHP 7.2 will contain new security features (sodium, Argon2i), several language improvements (<code>object</code> typehint, type widening) and a variety of minor changes that polish legacy parts of the language.</p>

<p>The <a href="http://php.net/archive/2017.php#id2017-08-31-1">RC1</a> was released on 31st August, so it is now a right time to try it out. If you can't or don't want to use it locally for development just yet, you should at least run your test suite against PHP 7.2 to see if there is anything to be fixed. I think there won't be many compatibility issues in a well-managed codebase.</p>

<p>If you are maintaining an open-source project, you should add 7.2 to TravisCI build matrix to ensure that your users won't encounter any compatibility issues. Or you can require PHP 7.2 in the next major version <a href="https://github.com/doctrine/doctrine2/pull/6577">like Doctrine ORM will</a>.</p>

<p>Thank you, Sara and Remi, and all the contributors for making this PHP release great!</p>

<p>What are you looking forward to most in the PHP 7.2?</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Don&#039;t Use Entities in Symfony Forms. Use Custom Data Objects Instead]]></title>
            <link href="https://blog.martinhujer.cz/symfony-forms-with-request-objects/"/>
            <updated>2017-08-23T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/symfony-forms-with-request-objects/</id>
            <content type="html"><![CDATA[<blockquote>
  <p>First part of this article explains why entities should not be used directly in Symfony Forms. Second part presents an approach which solves most of the problems presented in the first part.</p>
</blockquote>

<p>Let's start with stating that <strong>using entities for validation in Symfony Forms</strong> is widely used and widely recommend approach. Even the <a href="https://symfony.com/doc/current/forms.html">official documentation</a> suggests it.</p>

<p><strong>And I don't think it is a good idea!</strong></p>

<p><strong>Why?</strong></p>

<h3 id="1.-an-entity-should-be-always-valid.">1. An entity should be always valid.</h3>

<p>An entity should be always valid. It should not be possible for the entity to get to some inconsistent state. And that's exactly what the form validation is doing. When the form is submitted, the data are injected (through public properties or setters) into the entity and validated. And even if the validation fails, the invalid data are kept there and you have an invalid entity at hand.</p>

<blockquote>
  <p>Read <a href="https://ocramius.github.io/doctrine-best-practices/">those slides</a> from Ocramius or <a href="https://vimeo.com/134178140">watch the video</a> for great explanation what is means to have a valid entity (and much more).</p>
</blockquote>

<p>It's also not that hard to imagine the situation when this can cause you serious trouble. If the entity is already managed by EntityManager (because it is an <code>updateAction</code>) and there is a <code>$entityManager-&gt;flush()</code> call lurking in some listener, you'd end up with invalid data stored in database.</p>

<h3 id="2.-change%21-change%21-change%21">2. Change! Change! Change!</h3>

<p>The only sure thing about the software development is "change". Eventually you will need to change the structure of the form, maybe split it in two-step form. And the form fields will no longer map exactly 1:1 to entity's fields.</p>

<h3 id="3.-layers-separation">3. Layers separation</h3>

<p>It breaks the layers separation. Each layer should depend only on the deeper ones, not the other way around.</p>

<hr />

<p>What can we do instead of using entities in forms? Symfony documentation describes <a href="https://symfony.com/doc/current/form/without_class.html">how to use forms with data stored in array</a>. It is a viable solution, but it has disadvantages as well. Some I can think of is that you won't get code completion in IDE for the form data. Or that it is hard to statically analyze arrays with tools such as <a href="https://github.com/phpstan/phpstan">PHPStan</a>.</p>

<p>And there is another solution, the one I prefer.</p>

<h2 id="custom-data-classes-for-the-win">Custom Data Classes for the win</h2>

<p>To get around the disadvantages mentioned above, I suggest using a custom class to represent the form data.</p>

<p>Let's have a look at the example:</p>

<pre><code class="php">use Symfony\Component\Validator\Constraints as Assert;

class CreateArticleRequest
{

    /**
     * @Assert\NotBlank()
     * @Assert\Length(min="10", max="100")
     * @var string
     */
    public $title;

    /**
     * @Assert\NotBlank()
     * @var string
     */
    public $content;

    /**
     * @Assert\DateTime()
     * @var \DateTimeImmutable
     */
    public $publishDate;

}
</code></pre>

<p>It is a simple class that has some public properties and validator annotations. The main advantage is that is has nothing to do with the actual entity. <code>CreateArticleRequest</code> can handle as much of invalid data as you want and it won't cause you any trouble.</p>

<p>Second step is using the request object in the controller. You can use it the same way you'd use the entity (the following code should be self-explanatory):</p>

<pre><code class="php">  /**
     * @Route("/article/create/", name="article_create")
     */
    public function createAction(Request $request)
    {
        // create an instance of an empty CreateArticleRequest
        $createArticleRequest = new CreateArticleRequest();

        // create a form but with a request object instead of entity
        $form = $this-&gt;createForm(ArticleFormType::class, $createArticleRequest);
        $form-&gt;handleRequest($request);

        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {

            // ArticleFacade creates instance of an Article,
            // persists it and flushes the EntityManager.
            // (details are out of scope of this article)

            $article = $this-&gt;articleFacade-&gt;createArticle(
                $createArticleRequest-&gt;title,
                $createArticleRequest-&gt;content,
                $createArticleRequest-&gt;publishDate
            );

            // ... use $article to add title to flash message or something

            return $this-&gt;redirectToRoute('articles_list');
        }

        // render the form if it is the first request or if the validation failed
        return $this-&gt;render('article/add-article.html.twig', [
            'form' =&gt; $form-&gt;createView(),
        ]);
    }
</code></pre>

<p>And for the sake of completeness, the source of <code>ArticleFormType</code>:</p>

<pre><code class="php">class ArticleFormType extends \Symfony\Component\Form\AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        $builder
            -&gt;add('title', TextType::class, [
                'label' =&gt; 'Article title',
            ])
            -&gt;add('content', TextareaType::class, [
                'label' =&gt; 'Article title',
            ])
            -&gt;add('publishDate', DateTimeType::class, [
                'label' =&gt; 'Publish on',
            ])
            -&gt;add('save', SubmitType::class, [
                'label' =&gt; 'Save',
            ]);
    }
}
</code></pre>

<p>I call the data class <code>CreateArticleRequest</code> because it is a <em><code>Request</code></em> to create an article. You will probably also have a <code>UpdateArticleRequest</code> class with different properties (in some cases, both classes may be the same, so one <code>ArticleRequest</code> would be sufficient).</p>

<p>The <code>*Request</code> suffix may cause some confusion with the <code>Request</code> class which represents a HTTP request. If that is your case, you are free to change the suffix to <code>*Data</code> and use a class called <code>CreateArticleData</code>.</p>

<h2 id="what-about-update-form%3F">What about update form?</h2>

<p>One of the specifics of the update is that it won't necessarily have the exact same fields as the "create". In the example, we don't want to update the <code>publishDate</code> field in the entity. The <code>UpdateArticleRequest</code> will look like this:</p>

<pre><code class="php">use Symfony\Component\Validator\Constraints as Assert;

class UpdateArticleRequest
{

    /**
     * @Assert\NotBlank()
     * @Assert\Length(min="10", max="100")
     * @var string
     */
    public $title;

    /**
     * @Assert\NotBlank()
     * @var string
     */
    public $content;

    public static function fromArticle(Article $article): self
    {
        $articleRequest = new self();
        $articleRequest-&gt;title = $article-&gt;getTitle();
        $articleRequest-&gt;content = $article-&gt;getContent();

        return $articleRequest;
    }
}
</code></pre>

<p>You can see that the <code>$publishDate</code> field is missing, but more importantly, we have a new method there - <code>fromArticle(Article $article)</code>. It allows you to prepopulate the data from the existing article.</p>

<p>Check the following example of <code>updateAction()</code> to see how to use it in controller:</p>

<pre><code class="php">    /**
     * @Route("/article/update/{id}/", name="article_update")
     */
    public function updateAction(Article $article, Request $request)
    {
        // the $article argument is converted from {id} by implicit ParamConverter

        // pre-populate the UpdateArticleRequest instance with the data from the article
        $updateArticleRequest = UpdateArticleRequest::fromArticle($article);

        $form = $this-&gt;createForm(UpdateArticleFormType::class, $updateArticleRequest);
        $form-&gt;handleRequest($request);

        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {

            // ArticleFacade updates instance of an Article and flushes the EntityManager.
            // (details are out of scope of this article)

            $this-&gt;articleFacade-&gt;updateArticle(
                $article,
                $updateArticleRequest-&gt;title,
                $updateArticleRequest-&gt;content
            );

            // ... use $article to add title to flash message or something

            return $this-&gt;redirectToRoute('articles_list');
        }

        return $this-&gt;render('article/edit-article.html.twig', [
            'form' =&gt; $form-&gt;createView(),
        ]);
    }
</code></pre>

<p>You may think - that's a lot of code to write! I agree, but rest assured it is worth it in the long run. If your app contains some business logic and is not just a plain CRUD, it will eventually need different fields and validation rules during <em>create</em> and <em>update</em>. Then you will make good use of this extra code you had written.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In the article, I suggested why it may not be the best idea to use entities in Symfony Forms. The second part of the article proposes a way how to tackle this problem - by using a custom object instead of entity to carry the data and handle the validation.</p>

<p>There are two more takeaways:</p>

<ol>
<li>Always separate the application layers.</li>
<li>Do not blindly follow the documentation (or other developers).</li>
</ol>

<p><strong>Do you use similar solution in your projects? If you are using entities, have you already encountered any problems?</strong></p>

<p>Finally, you may want to read two related articles: <a href="https://stovepipe.systems/post/avoiding-entities-in-forms">Avoiding Entities in Forms</a> and <a href="https://stovepipe.systems/post/rethinking-form-development">Rethinking Form Development</a> (written by Iltar van der Berg).</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Jak začít s Dockerem? Od závislostí.]]></title>
            <link href="https://blog.martinhujer.cz/jak-zacit-s-dockerem-od-zavislosti/"/>
            <updated>2017-07-13T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/jak-zacit-s-dockerem-od-zavislosti/</id>
            <content type="html"><![CDATA[<p>V <a href="https://www.driveto.cz/">Drivetu</a> jsme začali používat Docker, ale tak trochu netradičně. Používáme ho totiž (zatím) jen na externí závislosti (Rabbit, Elastic, Cerebro, Kibana) a PHP + MariaDB máme stále nainstalované standardně.</p>

<p>Výhodou je, že takhle si Docker vyzkoušíme relativně bez rizika. Zjistíme, jak se chová, jestli všem funguje a podobně. Zároveň už nám bude rovnou přinášet hodnotu tím, že budeme mít všichni stejné verze a konfiguraci závislostí.</p>

<p>Bylo by cool mít v Dockeru všechno, ale tipuji, že zatím by nám to práci spíš přidělávalo, než šetřilo. Už třeba kvůli pomalému filesystému sdílených složek <a href="https://github.com/docker/for-win/issues/188">z Windows</a> nebo <a href="https://github.com/docker/for-mac/issues/77">z Macu</a>. Každopádně uvidíme v budoucnu - mít celé prostředí připravené bez nutnosti instalace a konfigurace čehokoliv je lákavá představa.</p>

<h2 id="instalace-dockeru-na-windows">Instalace Dockeru (na Windows)</h2>

<ul>
<li>Musíte mít Windows 10 Pro (v Home není Hyper-V)</li>
<li>V <em>Turn Windows features on or off</em> povolte Hyper-V</li>
<li><a href="https://store.docker.com/editions/community/docker-ce-desktop-windows">Stáhněte si Docker</a></li>
<li>Nainstalujte</li>
<li>pomocí <code>docker version</code> ověřte, že máte nainstalováno správně</li>
</ul>

<h2 id="nastaven%E3%AD-rabbitmq-v-dockeru">Nastavení RabbitMQ v Dockeru</h2>

<p>Pro nastavení používám Docker Compose, který umožňuje v jednom konfiguračním souboru definovat více služeb, které lze potom najednou spustit.</p>

<p>V rootu projektu vytvoříme soubor <code>docker-compose.yml</code> s následujícím obsahem (vysvětlím níže):</p>

<pre><code class="yaml">version: '3'
services:
    rabbitmq:
        image: rabbitmq:3.6.10-management
        hostname: driveto-rabbit
        ports:
            - 5672:5672
            - 15672:15672
</code></pre>

<ul>
<li><p><code>version: '3'</code> na začátku souboru je verze konfiguračního souboru pro <code>docker-compose</code>.</p></li>
<li><p>v <code>services</code> jsem definoval službu pojmenovanou <code>rabbitmq</code></p></li>
<li><p>použije se pro ni image <code>rabbitmq</code> z <a href="https://hub.docker.com/_/rabbitmq/">Docker Hubu</a> ve verzi <code>3.6.10-management</code>. Verzi by šlo podobně jako v Composeru definovat volněji, třeba jen <code>3.6</code> (nebo dokonce <code>latest</code>). Jenže tím se připravíme o výhodu toho, že všichni používají stejné prostředí, takže se doporučuji držet co nejpřesnější specifikace verze. <code>-management</code> v určení verze znamená, že jde o image, který obsahuje předinstalovaný <a href="https://www.rabbitmq.com/management.html">Management plugin</a> - webové rozhraní pro monitoring a konfiguraci RabbitMQ.</p></li>
<li><p><code>hostname</code> je důležité nastavit, protože ho RabbitMQ používá jako identifikátor při ukládání dat (je to popsané v dokumentaci na <a href="https://hub.docker.com/_/rabbitmq/">Docker Hubu</a> v sekci <em>How to use this image</em>)</p></li>
<li><p><code>ports</code> definují mapování portů - <code>HOST:CONTAINER</code> - první je port na hostitelským systému, druhý je port kontejneru. V ukázce mám přesměrované dva porty: <code>5672</code> pro komunikaci s RabbitMQ a <code>15672</code> pro webové rozhraní.</p></li>
</ul>

<h2 id="spu%E5%A1t%E4%9Bn%E3%AD-rabbitmq">Spuštění RabbitMQ</h2>

<ol>
<li>v adresáři, kde je <code>docker-compose.yml</code> zavoláme <code>docker-compose up</code></li>
<li>ten stáhne potřebné image a nastartuje kontejner s Rabbitem</li>
<li>RabbitMQ má vytvořeného uživatele <code>guest</code> s heslem <code>guest</code> a výchozí vhost <code>/</code></li>
<li>Webové rozhraní je přístupné na <code>http://localhost:15672</code></li>
</ol>

<p><code>docker-compose up</code> můžete spouštět v detached režimu přepínačem <code>-d</code>. Poběží pak na pozadí a nebude nutné nechat otevřenou konzoli. Logy z kontejnerů pak zobrazíte pomocí <code>docker-compose logs</code>. Na Windows používám jako konzoli <a href="http://cmder.net/">cmder</a>, kde si <code>docker-compose</code> nechávám běžet v jednom tabu na popředí, abych logy viděl průběžně.</p>

<h2 id="z%E3%A1v%E4%9Brem">Závěrem</h2>

<p>V článku ukázal, že začít s Dockerem není vůbec složité a zároveň že jde začít i jinak než zdockerizováním celé aplikace. Používáte Docker? Pro celou aplikaci nebo jen podobně jako my?</p>

<p>Pokud si budete Docker podle článku nastavovat a něco vám nebude fungovat, tak mi napište do komentářů nebo do kanálu <code>#docker</code> na <a href="https://pehapkari.cz/#slack">Slacku Pehapkaři.cz</a>.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Profilování PHP aplikací pomocí Blackfire]]></title>
            <link href="https://blog.martinhujer.cz/profilovani-php-aplikaci-pomoci-blackfire/"/>
            <updated>2017-04-06T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/profilovani-php-aplikaci-pomoci-blackfire/</id>
            <content type="html"><![CDATA[<p>O tom, že je rychlost aplikace důležitá, asi není potřeba diskutovat. Zrychlit aplikaci už tak snadné není. V článku vám předvedu, jak s pomocí Blackfire snadno odhalíte slabá místa vaší PHP aplikace.</p>

<p><strong><a href="https://www.zdrojak.cz/clanky/profilovani-php-aplikaci-pomoci-blackfire/">Článek vyšel</a> na serveru Zdroják.cz</strong></p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Las Palmas, Gran Canaria - kam na výlety?]]></title>
            <link href="https://blog.martinhujer.cz/las-palmas-gran-canaria-kam-na-vylety/"/>
            <updated>2017-03-07T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/las-palmas-gran-canaria-kam-na-vylety/</id>
            <content type="html"><![CDATA[<p>Letos jsem opět vyrazil na měsíc do Las Palmas jako digitální nomád. Už tu máme něco navýletováno, takže jsem se rozhodl sepsat, kam se dá podnikat. Kupodivu spoustu výletů se dá zvládnout i místními autobusy.</p>

<h2 id="autobusy">Autobusy</h2>

<p>Na Gran Canarii fungují meziměstské <a href="http://www.globalsu.net/">autobusy Global</a>. Trasy doporučuji hledat na Google Maps a pak <a href="http://www.globalsu.net/es/lineas.php">ověřit</a>, že se nezměnil jízdní řád. Pozor na dny v týdnu a státní svátky (doporučuji zapnout v Google Calendar). Většina jich jezdí ze San Telmo, což je autobusové nádraží ve Veguetě (dostanete se tam pěšky nebo městským autobusem).</p>

<p>V Las Palmas fungují <a href="http://www.guaguas.com/">městské autobusy GuaGua</a>. Pokud tu budete déle, tak se vyplatí si za €1.5 koupit bezkontaktní kartu, do které se dá nabíjet kredit. Jedna jízda pak stojí €0.85. Kartu pak jde dobíjet ve žlutých automatech. Jo a mají mobilní aplikaci, která vypadá docela použitelně.</p>

<p>ProTip: Pokud má autobus napsáno <em>FS</em> nebo <em>Fuera del servicio</em>, tak to není místo, ale je to "Mimo provoz" - takže autobus jede buď do garáže nebo to řidič zapomněl přepnout ;-)</p>

<p>ProTip2: Pokud letíte do Berlína v 7:15 ráno, tak se to dá v pohodě stihnout autobusem č. 1 v 5:00 ze San Telma (a tam se dá z Las Palmas dostat nočními L1 nebo L2).</p>

<h2 id="kola-zat%E3%ADm-nem%E3%A1m-vyzkou%E5%A1en%E3%A9">Kola (Zatím nemám vyzkoušené)</h2>

<p>Zatím to nemám vyzkoušené, ale mělo by jít si zřídit přístup na <a href="http://www.bybikelpa.com/">půjčování kol bybike</a>.</p>

<p>Potřebujete na to bezkontaktní Guagua kartičku (viz výše). Dále se podle <a href="http://www.bybikelpa.com/index.php?option=com_content&amp;view=article&amp;id=12&amp;Itemid=11&amp;lang=en">postupu na webu</a> zaregistrujete, pak až dva pracovní dny počkáte na schválení a následně se dojdete osobně ověřit do Guagua pobočky (třeba na Santa Catalině). A pak už půjčujete a jezdíte. Měli by mít i mobilní appku s mapou míst pro kola.</p>

<p><a href="http://www.bybikelpa.com/index.php?option=com_content&amp;view=article&amp;id=1&amp;Itemid=2">Podle mapy</a> se to zdá ideální na cestu do/z Veguetty.</p>

<h2 id="kam-v-las-palmas">Kam v Las Palmas</h2>

<p>(nejsou nijak seřazené)</p>

<h3 id="las-canteras">Las Canteras</h3>

<p><a href="https://goo.gl/maps/6gnjcEP3H922">Las Canteras</a> je hlavní několikakilometrová pláž v Las Palmas. Vlevo končí <a href="https://goo.gl/maps/1kPwtQCm4hF2">auditoriem</a> a vpravo Isletou. V levé části je hlavně pro surfaře, nejhezčí na ležení a koupání je to v pravé části. Když tam budete, tak sledujte vlajky. Zelená je OK, žlutá je typicky kvůli vlnám a červená je kvůli velkým vlnám. A letos jsme naneštěstí dost často viděli červenou s doplňkovou bílou s medúzami :-(</p>

<p>Pokud se vyvalíte na sluníčko, tak si dejte pozor na příliv, během pár hodin se moře přiblíží víc, než byste čekali.</p>

<h3 id="isleta">Isleta</h3>

<p>Ostrov na konci Las Canteras má napříč asi 200 m, takže je vidět z jedné strany na druhou. A zároveň tam začíná Isleta. Ta se vyznačuje tím, že je tam <a href="https://goo.gl/maps/bz3vtjPLjoH2">kopec s křížem</a>, ze kterého je pěkně vidět Las Palmas. Typicky tam dost fouká. Zleva od kříže se dá dojít k <a href="https://goo.gl/maps/WJPxzJQ1sJK2">jeskyním původních obyvatel</a> (resp. dalo se dříve, teď už se tam nesmí a může se jen dívat od závory). A když půjdete od kříže vpravo, tak se dá dojít až dolů k moři. Je to tak ideální na pozorování vln. A pak se podél moře dá dojít zpět do Las Palmas.</p>

<h3 id="vegueta---historick%E3%A9-centrum">Vegueta - historické centrum</h3>

<p>Ve Veguetě stojí za to určitě prochodit okolí <a href="https://goo.gl/maps/4m9jav32EAE2">katedrály</a>, <a href="https://goo.gl/maps/a3ZEjnhLtcB2">Casa de Colón</a>. Určitě nevynechte <a href="https://goo.gl/maps/cAtREPBnR6C2">Museo Canario</a> o historii Kanárských ostrovů. V pondělí a ve středu mezi 17 - 20 h mají vstup zdarma.</p>

<h3 id="tapas-night-ve-veguet%E4%9B">Tapas night ve Veguetě</h3>

<p>Každý čtvrtek večer (od osmi, možná až od devíti) se ve Veguetě koná Tapas Night. Znamená to, že v <a href="https://goo.gl/maps/TFh52J1ghEs">několika ulicích</a> nabízejí restaurace tapas (resp. pinchos – jednohubky) s různými zajímavými věcmi. Typicky stojí €1 nebo €2 a za další €1 k tomu máte pivo (třeba Tropical nebo Tropical limón).</p>

<p>Většinou jednu cestu chodíme pěšky a druhou jezdíme autobusem. Můžete jít buď městem nebo po <a href="https://goo.gl/maps/wb4Dg4F7JmT2">chodníku/cyklostezce podél moře</a>.</p>

<h3 id="santa-catalina---3d-sv%E4%9Btad%E3%ADly-a-vlajky">Santa Catalina - 3D světadíly a vlajky</h3>

<p><a href="https://goo.gl/maps/gbdooUcX2py">V rohu Parque de Santa Catalina</a> najdete pseudosousoší světadílů a jednotlivých vlajek.</p>

<h3 id="centro-comercial-las-arenas---primark">Centro Comercial Las Arenas - Primark</h3>

<p>V <a href="https://goo.gl/maps/vhqXr152PyE2">Las Arenas</a> někoho může potěšit Primark. My tam ale raději chodíme do Carrefouru pro čerstvé ryby (steak z tuňáka mňam).</p>

<h3 id="churros-v-madrile%E3%B1a">Churros v Madrileña</h3>

<p><a href="https://goo.gl/maps/QDex1UyPjcQ2">Madrileña</a> je naše oblíbené místo, kam chodíme na churros.</p>

<h3 id="pulpo-frito-v-%22el-paseo%22">Pulpo frito v "El Paseo"</h3>

<p><a href="https://goo.gl/maps/zD8cMWyPfGp">Restaurante Terraza "El Paseo"</a> najdete na konci Las Canteras u Auditoria. Dělají dobré grilované ryby a hlavně pulpo frito (chobotnici). Mňam.</p>

<h3 id="parque-del-estadio-insular">Parque del Estadio Insular</h3>

<p><a href="https://goo.gl/maps/iDghUguw8d32">Parque del Estadio Insular</a> je park postavený ze stadionu. V roce 2015 vzali rozpadlý stadion, kus tribun zbourali a udělali z něj park. Vevnitř je mimo jiné kavárna s nadstandardně dobrou kávou (na místní poměry).</p>

<h3 id="calle-cuatro-ca%E3%B1ones">Calle Cuatro Cañones</h3>

<p>Z <a href="https://goo.gl/maps/2DamoD88WxK2">Calle Cuatro Cañones</a> je večer hezký výhled na osvětlené město.</p>

<h3 id="technick%E3%A9-muzeum">Technické muzeum</h3>

<p>V technickém muzeu <a href="https://goo.gl/maps/VmzPp9FNx4M2">Museo Elder de la Ciencia y la Tecnología</a> jsem zatím nebyl, ale všichni, kdo tam byli, si ho pochvalovali.</p>

<h3 id="karneval">Karneval</h3>

<p>Pokud v Las Palmas budete během února, tak si v ulicích určitě všimnete spousty lidí v maskách. Je totiž karneval, během kterého se konají různá vystoupení a soutěže masek (volba královny plesu atd.). Vše vrcholí průvodem městem a následným upálením sardinky na Las Canteras (a ohňostrojem). Program <a href="http://lpacarnaval.com/en/">mají na webu</a>.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/sardinka.jpg" alt="Sardinka" /></p>

<h3 id="castillo-de-la-luz">Castillo de la Luz</h3>

<p><a href="https://goo.gl/maps/TCwDHRsPsKs">Castillo de la Luz</a> pevnost obklopená parkem. Vevnitř je nějaké umění (nebyl jsem se podívat).</p>

<h2 id="p%E5%BFj%E4%9Dov%E3%A1n%E3%AD-auta">Půjčování auta</h2>

<p>Půjčení auta vyjde od €40/den + benzín. Půjčovali jsme v <a href="http://rentacartirma.com/?lang=en">Tirmě</a> a <a href="http://www.cicar.com/">Cicar</a>. Vzhledem k tomu, že večer není v centru šance zaparkovat (jsou obsazená i místa, kde byste se to styděli zaparkovat). <a href="https://goo.gl/maps/k3CSnHzBWtD2">Parkovací dům</a> přijde třeba na €10 na noc. V tomhle má výhodu Cicar, protože pokud půjčujete jen na jeden den tak nemusíte řešit parkování a auto vrátíte přímo do jejich parkovacího domu (klidně v noci, a klíče hodíte do schránky u jejich kanceláře).</p>

<p>Při ježdění v centru určitě nezapomeňte na navigaci (offlinové Google Maps fungují pěkně), protože město se skládá především z jednosměrek.</p>

<h2 id="v%E3%BDlety">Výlety</h2>

<p>(většina dosažitelná autobusem, nejsou nijak seřazené)</p>

<h3 id="trh-v-teroru">Trh v Teroru</h3>

<p><a href="https://goo.gl/maps/ps9RqkftDiS2">Teror</a> je městečko, které je významné tím, že se tam kdysi pastýřům zjevila panenka Marie, takže tam postavili <a href="https://goo.gl/maps/c3SBQRQG9wm">baziliku</a>. A kromě toho je každou neděli v centru trh. Místní specialitou je speciální chorizo, které je něco jako mazací salám. A kolem €3 vám udělají <em>pan de chorizo con queso</em> - tedy bagetu s chorizem a sýrem. A také prodávají spoustu různých divných sladkých věcí - na váhu, takže můžete ochutnávat.</p>

<p>Pokud vám centrum města nestačí (nám nestačí), tak doporučuji výšlap na Cruz de la Hoya Alta. Záznam z <a href="https://www.wikiloc.com/wikiloc/view.do?id=16667695">naší trasy jsem dal na wikiloc</a>, který si ještě můžete zkrátit tím, že od kříže už dál nepůjdete (ono tam totiž stejně nic není, jen se nám to pořád nechtělo otočit zpátky).</p>

<h3 id="arucas">Arucas</h3>

<p>Město <a href="https://goo.gl/maps/j9TyDW8qY3z">Arucas</a> je zajímavé zejména tím, že v něm sídlí <a href="https://goo.gl/maps/TkoVC9AuKw22">destilérka Arehucas</a>, která vyrábí stejnojmenný rum. A hlavně dělají prohlídky továrny (všední dny do 13h), které končí ochutnávkou... (tenhle výlet se opravdu autem nevyplatí)</p>

<p>Abyste neměli pocit, že jedete jen za alkoholem, tak můžete navštívit kostel <a href="https://goo.gl/maps/1Bxob3dGXTw">Parroquia de San Juan Bautista</a> a vylézt na <a href="https://goo.gl/maps/kxuWtyFGEL42">Mirador de Arucas</a>.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/arehucas.jpg" alt="Arehucas" /></p>

<h3 id="caldera-de-bandama">Caldera de Bandama</h3>

<p><a href="https://goo.gl/maps/FdY27StZAQ42">Caldera de Bandama</a> je sopečný kráter, který nabízí různé možnosti zábavy. Můžete ho obejít dokola, slézt dovnitř (kde nějaký pán pěstuje zeleninu, pozor, také zavírá vrátka nahoře myslím v 17 h) a také vylézt na <a href="https://goo.gl/maps/Zb6vZQsLtq92">Pico de Bandama</a>, odkud jsou parádní výhledy.</p>

<p>Všechny tři části v jeden den jsou docela náročné, takže doporučuji obejití dokola nechat nakonec a případně vynechat úplně.</p>

<h3 id="firgas-a-%E3%BAdol%E3%AD-azulaje">Firgas a údolí Azulaje</h3>

<p>Do <a href="https://goo.gl/maps/V14brysq6rM2">Firgasu</a> můžete dojet autobusem a použít ho jako výchozí místo na výlet do údolí Azulaje. Záznam z <a href="https://www.wikiloc.com/wikiloc/view.do?id=16683495">naší trasy je na wikiloc</a> (jen pozor, chybí začátek, než jsem si vzpomněl na zapnutí trackování).</p>

<p>Z Firgasu nejdříve sestoupíte k areálu bývalých lázní, který si příroda postupně bere zpět. Následně pokračujete zajímavým terénem proti proudy řeky. Cestou budete přeskakovat řeku po kamenech a šplhat na skálu (na druhou stranu, cestou jsme potkali třeba i pár s malým dítětem, takže to zas tak náročné není.).</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/azulaje.jpg" alt="Azulaje" /></p>

<h3 id="maspalomas">Maspalomas</h3>

<p>Pokud zrovna nebude v Las Palmas na koupání, tak můžete vyrazit na jih, do ráje německých důchodců, do <a href="https://goo.gl/maps/oeRfgwX9mX72">Maspalomas</a>. I přesto, že v Las Palmas může být třeba zataženo, tak v Maspalomas bude s nejvyšší pravděpodobností hezky.</p>

<p>Určitě si projděte <a href="https://goo.gl/maps/KToHFjQeSDn">písečné duny</a>. A dále kromě písečné pláže, nudistické pláže a gay pláže, stojí za vidění také maják <a href="https://goo.gl/maps/DpZhiSucGmJ2">Faro Maspalomas</a>.</p>

<p>Nezapomeňte si sebou vzít opalovací krém a volitelně slunečník, fakt to tam opaluje, tak ať se nespálíte.</p>

<p>Pokud pojedete autem, tak můžete zkusit zaparkovat <a href="https://goo.gl/maps/EC3yrCPuPcA2">zadarmo mezi penziony</a>, případně <a href="https://goo.gl/maps/XzaHzix41Jy">na (placeném) parkovišti</a>, které je taky kousek od pláže.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/maspalomas.jpg" alt="Maspalomas" /></p>

<h3 id="jard%E3%ADn-bot%E3%A1nico-viera-y-clavijo">Jardín Botánico Viera y Clavijo</h3>

<p>Kousek za Las Palmas je docela velká a hezká botanická zahrada <a href="https://goo.gl/maps/QDyiNXDXt992">Jardín Botánico Viera y Clavijo</a>. Spíš to není to na celý den, ale určitě stojí za vidění. Takže ideální, pokud vám to vyjde cestou na jiný výlet autem.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/botanicka.jpg" alt="Jardín Botánico Viera y Clavijo" /></p>

<h3 id="trek-na-playa-de-g%E3%BEig%E3%BEi">Trek na Playa de Güigüi</h3>

<p><a href="https://goo.gl/maps/TtjKcWTgReC2">Playa de Güigüi</a> je na rozdíl od jiných místních pláží speciální tím, že se na ni dá dostat jen lodí nebo trekem přes horu. My jsme zvolili variantu přes horu. Výchozím místem je Tasartico (resp. kousek za ním po prašné cestě, kde se pak dá <a href="https://goo.gl/maps/7GXXqKxuhaC2">dobře zaparkovat</a>). Pozor, do Tasartica jeďte spodem přes Mogán, silnice horem od Agaete je často zavřená (typicky se ji kus sesune). Po zaparkování se vydejte <a href="https://www.wikiloc.com/wikiloc/view.do?id=16741021">po cestě naznačené na Wikiloc</a> (pozor, je tam jen cesta tam, musíte to jít i zpátky). Pláž je opravdu opuštěná, a kromě pár hipíků, kteří mají o kousek výš postavené domečky, tam nikdo není (kromě dalších lidí, kteří tam vyrazí na výlet). Takže si nezapomeňte hodně vody a svačinu ;-) Na cestu zpět si nechte dost času (nebo si vezměte čelovky, my jsme druhou půlku cesty zpět šli potmě.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/guigui.jpg" alt="Playa de Güigüi" /></p>

<h2 id="okru%E5%BEn%E3%AD-v%E3%BDlet-autem">Okružní výlet autem</h2>

<p>Následující místa se v (tomto pořadí) dají prohlédnout za jeden den. Doporučuji ohvězdičkovat v Google Map, ať podle toho pak můžete navigovat.</p>

<p>P.S. do zatáček v horách se troubí ;-) A pokud cestou potkáte nějakou pěknou vyhlídku, tak má u sebe většinou i odpočívadlo, takže se dá pokoukat.</p>

<h3 id="yacimiento-arqueol%E3%B3gico-cenobio-valer%E3%B3n">Yacimiento arqueológico Cenobio Valerón</h3>

<p><a href="https://goo.gl/maps/Q4zwXPSDwSB2">Yacimiento arqueológico Cenobio Valerón</a> jsou vykopávky na severu ostrova. Je tam spoustu jeskyní, které sloužily jako sklad obilí.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/valeron.jpg" alt="Valerón" /></p>

<h3 id="los-tilos-de-moya">Los Tilos de Moya</h3>

<p><a href="https://goo.gl/maps/Bmtc9GExoFy">Los Tilos de Moya</a> je přírodní rezervace s párkilometrovým okruhem lesem. Pokud jste si zatím mysleli, že Gran Canaria je suchý kámen, tak vás návštěva vyvede z omylu. A kromě jiného tu rostou vavříny (a.k.a. bobkový list).</p>

<h3 id="moya">Moya</h3>

<p>Vesnice <a href="https://goo.gl/maps/n6zLWCkoRRL2">Moya</a> je zajímavá zejména tím, že z <a href="https://goo.gl/maps/TGJpbpYhhZU2">vyhlídky za kostelem</a> je krásný výhled od údolí.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/moya.jpg" alt="Moya" /></p>

<h3 id="tejeda">Tejeda</h3>

<p><a href="https://goo.gl/maps/E86bvoyUCB92">Tejeda</a> je typická horská vesnice, kam se turisté jezdí dívat na typickou vesnici. Ale za projití stojí. Mají tam i kostel a panaderii, kde mají různá sladká pečiva.</p>

<h3 id="pico-de-las-nieves">Pico de las Nieves</h3>

<p><a href="https://goo.gl/maps/X34KLiYMgJq">Pico de las Nieves</a> nejvyšší hora Gran Canaria. Skoro až na vrchol se dá dojet autem. Je odtamtud pěkný výhled na Roque Nublo. Na úplný vrchol se ale vylézt nedá, protože tam je nějaká vojenská radiová stanice (nicméně <a href="https://goo.gl/maps/4wpWqtMysgB2">přístupná vyhlídka</a> je téměř na vrcholu, takže to je jedno).</p>

<h3 id="roque-nublo">Roque Nublo</h3>

<p><a href="https://goo.gl/maps/k3PeBCwv6Ys">Roque Nublo</a> je hora, která má na vršku kámen postavený na špičku. Zastavit můžete <a href="https://goo.gl/maps/gdzwjB3xuNC2">na parkovišti nebo podél silnice</a> a na vrchol vede asi půlhodinová procházka po kamenité cestě. Pokud je hezké počasí, tak je od vrcholu vidět Teide na Tenerife.</p>

<p><img src="/data/2017/2017-03-07-las-palmas-gran-canaria-kam-na-vylety/teide.jpg" alt="Teide od Roque Nublo" /></p>

<h3 id="presa-de-las-ni%E3%B1as">Presa De Las Niñas</h3>

<p>Od Roque Nublo vyrazte směrem k <a href="https://goo.gl/maps/3nmVgyg7mfT2">La Playa de Mogán</a>. Cestou dolů narazíte na přehradu <a href="https://goo.gl/maps/nbnYmjR1DL72">Presa De Las Niñas</a>, ke které se dá dojít (a kromě jiného tam je kemp).</p>

<h3 id="puerto-de-mog%E3%A1n">Puerto de Mogán</h3>

<p>Puerto de Mogán je přístavní město. Přístav určitě stojí za projití. A také má hezkou pláž. Když budete mít štěstí, tak vám výlet vyjde tak, že z Mogánu budete moci pozorovat západ slunce – doporučuji <a href="https://goo.gl/maps/ZS4D4n1WCG62">tohle místo</a>.</p>

<p>Z Mogánu to potom je po GC-1 a GC-2 do Las Palmas tak hodina. Na další den si neplánujte nic velkého, protože budete zničení ;-)</p>

<h3 id="plane-spotting">Plane Spotting</h3>

<p>Aneb <em>"koukání na letadla"</em>. Měli jsme v plánu, ale nestihli jsme. Mělo by se dát dojet do <a href="https://goo.gl/maps/cJ2b7FAzgUs">El Burrero</a> a odtamtud sledovat přistávající letadla.</p>

<p><strong>Tip:</strong> Případně při odjezdu doražte na letiště o něco dřív a vylezte na terasu pro kuřáky. Je odtamtud pěkný výhled na ruch na letišti. Jen tam tedy občas někdo kouří.</p>

<h2 id="co-ochutnat">Co ochutnat</h2>

<p>Samozřejmě nemůžu vynechat jídlo.</p>

<ul>
<li>Churros už jsem zmínil nahoře.</li>
<li>V obchodech mají široký výběr sušené šunky (jamón serrano). </li>
<li>Dál určitě fuet a longaniza (šušené salámy).</li>
<li>V obchoďáku můžete koupit chlazené nebo mražené krevety za €10/kilo, což je dobrý deal.</li>
<li>Tuňák v konzervě je tu levnější než v ČR, je to moje oblíbená svačina na výlety (lžičku s sebou!).</li>
<li>Ve větších obchodech vám u rybího pultu rádi nakrojí plátky z čerstvého tuňáka. </li>
<li>V kavárnách si rád dávám café con leche, což je espreso s trochou našlehaného mléka.</li>
</ul>

<h2 id="z%E3%A1v%E4%9Brem">Závěrem</h2>

<p>Hlavně se tu nesnažte strhnout všechny výlety za pár dnů a raději odpočívejte a relaxujte.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Návrhový vzor Null Object]]></title>
            <link href="https://blog.martinhujer.cz/null-object/"/>
            <updated>2016-11-09T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/null-object/</id>
            <content type="html"><![CDATA[<p>V článku předvedu, jak pomocí návrhového vzoru Null Object můžeme zjednodušit kód. Budu se snažit ukázat maximum příkladů a jen minimum teorie (na tu vás odkážu jinam).</p>

<p>Prvním příkladem je <em>volitelná</em> závislost. V následující ukázce to je <code>$logger</code>. Buď ho máme nastavený a v tom případě logujeme nebo nemáme a nelogujeme.</p>

<pre><code class="php">class DataProcessor
{
    /** @var LoggerInterface */
    private $logger;

    public function setLogger(LoggerInterface $logger)
    {
        $this-&gt;logger = $logger;
    }

    public function processData($data)
    {
        if ($this-&gt;logger !== null) {
            $this-&gt;logger-&gt;log('Processing started!');
        }

        // some work...

        if ($this-&gt;logger !== null) {
            $this-&gt;logger-&gt;log('Processing finished!');
        }
    }
}

interface LoggerInterface
{
    public function log($message);
}

class StdoutLogger implements LoggerInterface
{
    public function log($message)
    {
        echo $message;
    }
}
</code></pre>

<p>Použití třídy pak může vypadat takto</p>

<pre><code class="php">$processor = new DataProcessor();
$processor-&gt;setLogger(new StdoutLogger());
$processor-&gt;processData([]); // máme a logujeme

$processorWithoutLogging = new DataProcessor();
$processorWithoutLogging-&gt;processData([]); // nemáme a nelogujeme
</code></pre>

<p>Kromě toho, že dependency injection pomocí setteru je špatně (existuje instance v nekonzistentním stavu), tak kontroly <code>null</code> zbytečně zesložiťují metodu <code>processData()</code>.</p>

<p>Tady přichází ke slovu návrhový vzor Null Object. Místo, abychom se rozhodovali, jestli logger nastavíme nebo ne, tak ho nastavíme vždy. Ideálně pomocí contructor injection. Díky tomu můžeme odebrat podmínky v metodě <code>processData()</code>:</p>

<pre><code class="php">class DataProcessor
{
    /** @var LoggerInterface */
    private $logger;

    public function __construct(LoggerInterface $logger)
    {
        $this-&gt;logger = $logger;
    }

    public function processData($data)
    {
        $this-&gt;logger-&gt;log('Processing started!');

        // some work...

        $this-&gt;logger-&gt;log('Processing finished!');
    }

}
</code></pre>

<p>Protože bez instance loggeru nemůžeme vytvořit <code>DataProcessor</code>, vytvoříme třídu <code>NullLogger</code>, která implementuje rozhraní <code>LoggerInterface</code>, ale nikam neloguje.</p>

<pre><code class="php">class NullLogger implements LoggerInterface
{
    public function log($message)
    {
        // intentionally does nothing
    }
}

$processor = new DataProcessor(new StdoutLogger());
$processor-&gt;processData([]); // máme a logujeme

$processorWithoutLogging = new DataProcessor(new NullLogger());
$processorWithoutLogging-&gt;processData([]); // máme, ALE NELOGUJEME
</code></pre>

<p>Odsunuli jsme starost o <code>null</code> mimo třídu, čímž jsme elegantně zjednodušili kód <code>DataProcessor</code>. Jde vlastně o příklad použití polymorfismu - místo speciálního chování podle typu delegujeme řešení na tu samotnou třídu.</p>

<h2 id="co-situace%2C-kdy-to-pot%E5%99ebuji-rozli%E5%A1it%3F">Co situace, kdy to potřebuji rozlišit?</h2>

<p>Samozřejmě ne vždy to půjde takhle snadno jako v tomto případě. Cílem návrhového vzoru je zjednodušit většinu použití, ale zároveň umožnit rozlišení tam, kde to je nezbytné.</p>

<p>Jako první možnost odlišení vás asi napadne:</p>

<pre><code class="php">if ($this-&gt;logger instanceof NullLogger) {
</code></pre>

<p>Ale to by znamenalo porušení Dependency Inversion Principle a zároveň bychom nemohli použít několik různých Null objektů. Fowler (2012) na to navrhuje dvě řešení:</p>

<ol>
<li>V interface vytvořit metodu <code>public function isNull(): bool;</code>, která v konkrétních implementacích bude buď vracet <code>true</code> nebo <code>false</code>.</li>
<li>Pokud nemůžeme měnit rozhraní a ostatní třídy, můžeme vytvořit <code>interface Null { }</code> a implementovat ho v našich Null třídách.</li>
</ol>

<p>Použití  pak může vypadat takto:</p>

<ol>
<li>speciální metoda:</li>
</ol>

<pre><code class="php">if ($this-&gt;logger-&gt;isNull()) {
    // chování pro null
}
</code></pre>

<ol start="2">
<li>implementované rozhraní: </li>
</ol>

<pre><code class="php">if ($this-&gt;logger instanceof Null) {
    // chování pro null
}
</code></pre>

<h2 id="jak-refaktorovat-st%E3%A1vaj%E3%ADc%E3%AD-k%E3%B3d%3F">Jak refaktorovat stávající kód?</h2>

<p>Fowler ukazoval Null Object v knize <em>Refactoring - Improving the Design of Existing Code</em> (Fowler, 2012, p260) a mně se hodně líbilo, jak to refaktoroval po malých "baby-steps" (co nejmenší bezpečné kroky, čím se minimalizuje riziko, že něco rozbijeme). Zjednodušeně je tu popíšu na od něj vypůjčeném a upraveném příkladu.</p>

<p>Máme zákazníka, který má přiřazenou úroveň slev:</p>

<pre><code class="php">class DiscountLevel
{
    const NONE = 'none';
    const PREMIUM = 'premium';
}

class Customer
{
    public function getDiscountLevel() { ... }
}
</code></pre>

<p>A použití zákazníka vypadá takto:</p>

<pre><code class="php">if ($customer === null) {
    $discountLevel = DiscountLevel::NONE;
} else {
    $discountLevel = $customer-&gt;getDiscountLevel();
}

// případně takto
if ($customer !== null) {
    $entityManager-&gt;persist($customer);
}
</code></pre>

<p>Prvním krokem refaktoringu je přidání metody <code>isNull()</code> a vytvoření <code>NullCustomer</code> jako potomka <code>Customer</code> (jen se změněným chováním metody <code>isNull()</code>). Zároveň v tomto kroku musíme změnit <strong>všechna</strong> porovnání s <code>null</code> na volání <code>-&gt;isNull()</code> (<code>$customer</code> už nikdy nebude <code>null</code>, takže by to jinak rozbilo stávající kód)</p>

<pre><code class="php">class Customer
{
    public function getDiscountLevel() { ... }

    public function isNull()
    {
        return false;
    }
}

class NullCustomer extends Customer
{
    public function isNull()
    {
        return true;
    }
}

if ($customer-&gt;isNull()) {
    $discountLevel = DiscountLevel::NONE;
} else {
    $discountLevel = $customer-&gt;getDiscountLevel();
}

if (!$customer-&gt;isNull()) {
    $entityManager-&gt;persist($customer);
}
</code></pre>

<p>Následně budeme procházet jednotlivá použití a zkoumat, zda je pomocí Null Objectu můžeme zjednodušit.</p>

<p>Nejdříve se podíváme na <code>getDiscountLevel()</code>. Stačí, pokud tu metodu v <code>NullCustomer</code> překryjeme, aby vždy vracela <code>DiscountLevel::NONE</code> a můžeme podmínku úplně zrušit.</p>

<pre><code class="php">// Customer se nemění

class NullCustomer extends Customer
{
    public function isNull() {...};

    public function getDiscountLevel()
    {
        return DiscountLevel::NONE;
    }
}

// tady jsme zrušili složitý if
$discountLevel = $customer-&gt;getDiscountLevel();
</code></pre>

<p>V druhé situaci, při persistování do databáze, se podmínky nezbavíme. Šlo by to vyřešit úpravou persistování, aby kontrolovalo, jestli nepředáváme objekt implementující <code>Null</code> interface a to důsledně implementovat u všech Null objektů. Ale to by spíš vedlo ke znepřehlednění než zpřehlednění.</p>

<pre><code class="php">// tady if zůstal
if (!$customer-&gt;isNull()) {
    $entityManager-&gt;persist($customer);
}
</code></pre>

<p>Na složitějším příkladu jsme si ukázali, jak můžeme zjednodušit existující kód zavedením Null Objectu a že ne ve všech situacích to je možné.</p>

<h2 id="p%E3%A1r-stru%E4%9Dn%E3%A1ch-pozn%E3%A1mek">Pár stručnách poznámek</h2>

<ul>
<li>Null Object se často používá při implementaci návrhového vzoru Strategy (jako nejjednodušší strategie, kterou můžeme vytvořit)</li>
<li>Klidně je možné vytvořit více různých Null objektů pro jeden reálný typ</li>
<li>Null objekt by se nikdy neměl změnit v reálný objekt (pokud to potřebujeme, tak by to od začátku měl být reálný objekt, který se jen dočasně chová jako Null objekt)</li>
</ul>

<h2 id="shrnut%E3%AD">Shrnutí</h2>

<p>Návrhový vzor Null Object se snaží řešit opakovaný kód pro kontrolu, zda máme k dispozici instanci třídy. Místo porovnávání s <code>null</code> vytvoříme třídu se strejným rozhraním, ale s prázdným nebo defaultním chováním. Tím odsunujeme problém z kódu, který třídu používá o úroveň výše.</p>

<p><strong>Slyšeli jste o tomto návrhovém vzoru už dříve? Používáte ho ve své aplikaci? Budu rád, pokud se podělíte o další příklady v komentářích.</strong></p>

<h2 id="zdroje">Zdroje</h2>

<ul>
<li>FOWLER, Martin, Kent BECK, John BRANT, William OPDYKE a Don ROBERTS. <em>Refactoring: Improving the Design of Existing Code.</em> Addison-Wesley, 2012. ISBN 9780133065268.</li>
<li><a href="https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm">https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm</a></li>
<li><a href="https://sourcemaking.com/design_patterns/null_object">https://sourcemaking.com/design_patterns/null_object</a></li>
<li><a href="https://www.cs.oberlin.edu/~jwalker/nullObjPattern/">https://www.cs.oberlin.edu/~jwalker/nullObjPattern/</a></li>
</ul>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Platební karta Revolut]]></title>
            <link href="https://blog.martinhujer.cz/revolut-karta/"/>
            <updated>2016-11-08T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/revolut-karta/</id>
            <content type="html"><![CDATA[<p>Na výběry z bankomatů v zahraničí a na placení na podezřelých webech jsem si pořídil <a href="https://revolut.com/">Revolut kartu</a>.</p>

<p><img src="/data/2016/2016-11-08-revolut-karta/revolut-logo.jpg" alt="Revolut logo" /></p>

<h2 id="funguje-to-n%E3%A1sledovn%E4%9B%3A">Funguje to následovně:</h2>

<ol>
<li>nainstalujete si mobilní aplikaci</li>
<li>vyplníte své údaje</li>
<li>necháte si vystavit kartu (pro online placení je k dispozici ihned)</li>
<li>počkáte, než vám doručí fyzickou MasterCard - je to britský startup a karta z UK přišla rychleji než z Fio banky</li>
<li>aktivujete ji v aplikaci</li>
<li>převedete si na Revolut účet peníze z jiné karty nebo banky</li>
<li>vybíráte a platíte</li>
</ol>

<h2 id="na-co-se-hod%E3%AD%3F">Na co se hodí?</h2>

<p>Já Revolut používám zejména na výběry z bankomatu v cizině. Nechci u sebe mít zbytečně hodně peněz v hotovosti (všechno co jde, se snažím platit kartou), takže nejradši vybírám po €40. S českou platební kartou, kde typicky účtují fixní poplatek a procenta z vybírané částky bych se nedoplatil. Takže to dělám tak, že českou Airbank kartou dobíjím Revolut účet (za relativně férový Airbank kurz) a vybírám Revolut kartou. Mají zdarma neomezený počet výběrů do objemu £500 měsíčně (což je teď vlastně i přibližně €500).</p>

<p>Kromě vybírání z bankomatu kartu používám na placení na podezřelých webech, kde je nutné zadat číslo karty přímo do webu. V mobilní aplikaci lze totiž u karty zvlášť povolit nebo vypnout platby online, takže na platbu na podezřelém webu je zapnu a pak zase vypnu.</p>

<p>Ještě by měla umět snadno převádět peníze mezi jednotlivými uživateli, ale to jsem zatím nezkoušel.</p>

<h2 id="nev%E3%BDhody">Nevýhody</h2>

<p>Nevýhodou může být, že jediným způsobem, jak Revolut kartu získat a ovládat je pomocí mobilní aplikace (je podobně jako třeba Whatsapp navázaná na telefonní číslo). Ale na druhou stranu to je hodně příjemné - např. zobrazí notifikaci v okamžiku zaplacení.</p>

<p>Zároveň je složitější z ní převést peníze zpět na český účet (myslím, že tam je nějaký poplatek za mezinárodní platbu), takže si tam dobíjím je částky, které stejně brzy vyberu.</p>

<p>Na jejich Facebook stránce jsem zachytil, že psali o nějakém výpadku, takže určitě na ni nespoléhejte jako na jedinou kartu (ale to ani na žádnou jinou!).</p>

<h2 id="shrnut%E3%AD">Shrnutí</h2>

<p>Jestli se chystáte do zahraničí a víte, že budete častěji vybírat z bankomatu, tak Revolut určitě vyzkoušejte.</p>

<p>Pokud při registraci zadáte v aplikaci zadáte promo kód <code>martinpri</code>, tak bychom oba měli od Revolutu dostat nějaké bonusové fufníky.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Córdoba - co navštívit?]]></title>
            <link href="https://blog.martinhujer.cz/cordoba/"/>
            <updated>2016-11-03T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/cordoba/</id>
            <content type="html"><![CDATA[<p>V Córdoba jsem pobyl jen pár dnů, ale mám pár tipů, které by se vám mohly hodit. (<a href="/spanelsko/">Tipy ke Španělsku</a> obecně jsem sepsal v <a href="/spanelsko/">samostatném článku</a>).</p>

<p><img src="/data/2016/2016-11-03-cordoba/cordoba.jpg" alt="Most v Cordobě" /></p>

<h2 id="co-nav%E5%A1t%E3%ADvit">Co navštívit</h2>

<ul>
<li><strong><a href="https://goo.gl/maps/nRAmcQBQa6p">Mezquita-Catedral de Córdoba</a></strong> - nejzajímavější památka v Córdobě. Když křesťané v 13. století vyhnali araby, tak místo toho, aby mešitu zbourali, tak do ní zabudovali katedrálu a vysvětili ji. Takže to je mešito-katedrála. Na rozdíl od Alhambry jsem neměl problém se vstupenkami, stačilo pár minut ve frontě. Do věže se vstupenky kupují samostatně a na konkréní čas, takže doporučuji ji jít koupit před návštěvou katedrály, mně to díky tomu pěkně navazovalo.</li>
</ul>

<p><img src="/data/2016/2016-11-03-cordoba/mesito-katedrala.jpg" alt="Mešito-katedrála" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/8fyuAqhQcXG2">Puente Romano</a></strong> - obdoba Karlova mostu </li>
<li><strong><a href="https://goo.gl/maps/7bW9MLgnYRs">Sinagoga de Córdoba</a></strong> - synagoga ze 14. století, jedna z mála zachovalých synagog ve Španělsku (postavených před vyhnáním židů v 15. století) </li>
<li><strong><a href="https://goo.gl/maps/g4TQdDnhxAH2">Puerta de Almodóvar</a></strong> - zachovalá zeď a brána </li>
<li><strong><a href="https://goo.gl/maps/TzBykpLtYzj">Templo Romano</a></strong> - zbytky římského chrámu v centru města </li>
<li><strong><a href="https://goo.gl/maps/e9UhBLbcqtx">Plaza de la Corredera</a></strong> - náměstí s hezkými domy okolo </li>
<li><strong><a href="https://goo.gl/maps/5RVhPSt9LAu">Palacio de Viana</a></strong> - palác s nádhernými zahradami, odpoledne 14-17h měli vstup zdarma</li>
<li><strong><a href="https://goo.gl/maps/Rgg6Vszx8Lv">El Mundo de Alicia</a></strong> - příjemná kavárna s výhledem na kostel, dělají fajn snídaně a dortíky. Pokud si budete sedat na zahrádku, tak si dejte pozor, ať si nesednete do vedlejší kavárny - mají zahrádky hned vedle sebe </li>
<li><strong><a href="https://goo.gl/maps/CyjwPSpjyTD2">De tapas</a></strong> - tapas restaurace - prochází mezi stoly s tácy tapas a berete si, na co máte chuť. Při placení vám zúčtují dřevené tácky, které vám od tapas zbyly. </li>
</ul>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Granada - co navštívit?]]></title>
            <link href="https://blog.martinhujer.cz/granada/"/>
            <updated>2016-10-31T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/granada/</id>
            <content type="html"><![CDATA[<p>V Granadě jsem pobyl týden a zjistil jsem pár věcí, které vám pomohou si pobyt užít ještě více. (<a href="/spanelsko/">Tipy ke Španělsku</a> obecně jsem sepsal v <a href="/spanelsko/">samostatném článku</a>).</p>

<p><img src="/data/2016/2016-10-31-granada/granada-sierra-nevada.jpg" alt="Sierra Nevada" /></p>

<h2 id="bydlen%E3%AD">Bydlení</h2>

<p>Bydlel jsem trochu dál od centra, což na jednu stranu bylo super, protože to byl domek s předzahrádkou, kde rostl pomerančovník a citrónovník, ale zas to bylo všude daleko. Příště bych asi vybral něco blíže k centru.</p>

<h2 id="co-nav%E5%A1t%E3%ADvit">Co navštívit</h2>

<ul>
<li><strong><a href="https://www.alhambradegranada.org">Alhambra</a></strong> - top věc v Granadě. Jde o zachovalou arabskou pevnost, palác a zahrady. Prý je to skoro nejnavštěvovanější památka ve Španělšku. Projevuje se to mimojiné tím, že vstupenky byly i v říjnu vyprodané na dva týdny dopředu. Pokud, podobně jako já, nebudete dopředu vědět, kdy budete v Granadě, tak existuje druhá varianta a to koupit lístky na ten den ráno na místě. Funguje to tak, že tak od půl sedmé se u prodeje lístků začne tvořit fronta na tu část lístků, které nepustili do předprodeje. Pokladna se otevírá v osm. Já tam dorazil na sedmou a byl jsem tak v polovině fronty a dovnitř jsem se dostal kolem deváté. Těsně před rozedněním je zima, tak si na stání ve frontě určitě vezměte teplé oblečení (jakože fakt!). Ale rozhodně to stojí za to.</li>
</ul>

<p><img src="/data/2016/2016-10-31-granada/alhambra.jpg" alt="Alhambra" /></p>

<ul>
<li><strong><a href="https://goo.gl/maps/9CnEEtRYL4D2">Mirador San Nicolás</a></strong> - na Alhambru je nejlépe vidět z druhého kopce, od kostela San Nicolás. Je tam spousta turistů a prodejců cetek. Nejlepší čas je asi kolem půl třetí až třetí odpoledne, kdy většina lidí obědvá.</li>
<li><strong><a href="https://goo.gl/maps/1xuGzRALYNs">Mirador de San Cristobal</a></strong> - je méně main-streamová vyhlídka, ze které je vidět na Granadu. Ten kostel San Cristobal je zajímavý tím, že ho postavili místo mešity z kamenů ze kterých byla ta mešita, takže má na stěnách kameny s arabskými nápisy.  </li>
<li><strong><a href="https://goo.gl/maps/qr2nJTsLB1n">Catedral de Granada</a></strong> - velká katedrála, ale tím, že už jsem letos byl v hodně podobných, tak mě to moc nebavilo (všechny jsou plus mínus stejné)</li>
<li><strong><a href="https://goo.gl/maps/9o7yangQUPU2">Jardín Botánico de la Universidad de Granada</a></strong> - botanická zahrada od Univerzity Granada - oáza klidu v centru města, lavičky, místní toulavé kočky</li>
<li><strong><a href="https://goo.gl/maps/SM7Nd2X8Scu">Parque García Lorca</a></strong> - nádherný park okolo domu, kde v Granadě bydlel básník <a href="https://en.wikipedia.org/wiki/Federico_Garc%C3%ADa_Lorca">Federico García Lorca</a></li>
<li><p><strong><a href="https://goo.gl/maps/SsmcaXSzkAL2">Sierra Nevada</a></strong> - kousek od Granady je pohoří Sierra Nevada, kde národní park a zároveň spoustu sjezdovek. Mimo lyžařskou sezónu se tam dá dostat autobusem jednou denně ráno v 9h z autobusáku a odpoledne v 16h zpět (nebo samozřejmě autem). Granada je cca 700 m.n.m. a autobus vás vyveze do 2500 m.n.m. Já se pak vypravil na <a href="https://goo.gl/maps/SsmcaXSzkAL2">Pico de Veleta</a> (3396 m.n.m.). Skoro až nahoru vede silnice, ale mnohem lepší je zkracovat si zatáčky po cestičkách (offline Mapy.cz FTW!). Vzhledem k tomu, že nejsem nějaký extra horal, tak mě docela překvapilo, že chůze do kopce ve vyšší nadmořské výšce je opravdu náročnější. Po návratu jsem zjistil, že ta hora, na kterou jsem si udělal sobotní procházku je 4. nejvyšší ve Španělsku :-)</p></li>
<li><p><strong>Couchsurfing meetupy</strong> - viz kapitola <em>Setkávání se s místními</em> v <a href="/spanelsko/">Tipy ke Španělsku</a>.</p></li>
</ul>

<h2 id="praktick%E3%A9">Praktické</h2>

<ul>
<li><strong>Voda z vodovodu</strong> - moc dobrá</li>
<li><strong>V noci zima</strong> - v říjnu už bylo v noci a ráno chladno, kolem 10°C, ale přes den 25°C, tak s tím počítejte</li>
</ul>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Málaga - co, kdy kde a jak?]]></title>
            <link href="https://blog.martinhujer.cz/malaga/"/>
            <updated>2016-10-24T00:00:00+00:00</updated>
            <id>https://blog.martinhujer.cz/malaga/</id>
            <content type="html"><![CDATA[<p>Během dvou týdnů v Málaze (10.10. - 23.10.) jsem nasbíral pár tipů, které vám pomohou si pobyt užít ještě více. (<a href="/spanelsko/">Tipy ke Španělsku</a> obecně jsem sepsal v <a href="/spanelsko/">samostatném článku</a>).</p>

<p><img src="/data/2016/2016-10-24-malaga/malaga-arena.jpg" alt="" /></p>

<h2 id="bydlen%E3%AD">Bydlení</h2>

<p>První týden jsem bydlel v centru (~200m od Picassova muzea), což bylo super na prozkoumávání města. Nevýhodou bylo, že v ulici bylo několik barů a Španělé v pátek a sobotu rozhodně nekončí o půlnoci (a ještě v úterý - protože mi tam vyšel středeční svátek). Ale se špunty do uší to nebyl problém. A mít to kamkoliv kousek bylo super.</p>

<p>Druhý týden jsem bydlel v pokoji v domku se zahradou v Huelinu (taková rezidenční čtvrť), kousek od pláže. Byl tam klid a blízko na trh, jen na meetupy do centra to holt byla 3km procházka podél moře.</p>

<h2 id="co-nav%E5%A1t%E3%ADvit">Co navštívit</h2>

<p>V neděli má většina muzeí a památek odpoledne a navečer vstup zdarma (doporučuji čas vždycky ověřit na webu)</p>

<ul>
<li><strong><a href="https://goo.gl/maps/z5nAZGmjMDA2">Teatro Romano</a></strong> - vykopaný kus starého římského amfiteátru - vstup zadarmo (nemají to napsané zvenku), pozor na otevírací dobu - vyšlo mi to až napotřetí, co jsem šel okolo</li>
<li><strong><a href="https://goo.gl/maps/6CYv5DY7h7P2">Museo Picasso</a></strong> - v neděli 17-19 zdarma (místo €7). Kolem 17h tam byla dost dlouhá fronta, ale o něco později tam už nečekal skoro nikdo. Když je vstup zdarma, tak si za €1 můžete půjčit audioguide (jinak je v ceně). Pokud, podobně jako já, moc nemáte přehled o umění, tak doporučuji si nejdříve o <a href="https://en.wikipedia.org/wiki/Pablo_Picasso">Picassovi přečíst na Wikipedii</a>. Diky tomu a audioguide jsem si to příjemně užil. Jo ať vás to nepřekvapí, při vstupu rentgenují batohy.</li>
<li><strong><a href="https://goo.gl/maps/gfiTqxizj6z">Castillo de Gibralfaro</a></strong> - hrad na kopci s výborným výhledem do okolí. Cestou půjdete okolo vyhlídky a z ní můžete odbočit po pěšince, která cestu nahoru prodlouží asi o půl kilometru - ale stojí to za to (je z ní mj. focená ta fotka nahoře). A úplně super je vyjít si na vyhlídku v noci a podívat se na osvětlené město. V neděli odpoledne je vstup do hradu zdarma (jinak myslím €2). A až budete na hradě, tak se kromě rozhlížení z hradeb podívejte dovnitř, pěstují tam různé věci, které se tam pěstovaly v době, kdy ho arabové postavili.</li>
<li><strong><a href="https://goo.gl/maps/BdMLhvWUJhu">Alcazaba</a></strong> - arabská pevnost, v neděli odpoledne vstup zdarma (jinak myslím €2)</li>
<li><strong><a href="https://goo.gl/maps/E8i3m96vGZy">Parque del Oeste</a></strong> - nádherný park v Heulinu - sochy, fontánky, rybník s černými labutěmi a želvičkami. Má dvě části, které jsou propojené podchodem pod silnicí.</li>
<li><strong>Couchsurfing meetupy</strong> - viz kapitola <em>Setkávání se s místními</em> v <a href="/spanelsko/">Tipy ke Španělsku</a>.</li>
</ul>

<h2 id="praktick%E3%A9">Praktické</h2>

<ul>
<li><strong>Voda</strong>  - nejdřív jsem ji tahal ze supermarketu, ale pak jsem zjistil, že jde pít i tu z vodovodu. Místní ji moc nepijí (nebo si ji filtrují), protože jim nechutná, ale podle mě se dá (a nic mi z ní nebylo).</li>
<li><strong><a href="https://goo.gl/maps/ex2GqgJn8gG2">Mercado de Huelin</a></strong> - místní trh, kilo avokád od €1, v Mercadoně €4.65. Většina věcí je výhodnější ve větších objemech (2 kg mandarinek €1.8 apod). Prodávají se tam jak <em>bananas</em>, tak <em>plátanos canarias</em>, což jsou banány z kanárských ostrovů - a podle mě jsou o něco chutnější. (hned vedle trhu jsem našel <a href="https://goo.gl/maps/1ve9aJyrAgN2">příjemnou kavárnu</a> s dobrými churros).</li>
<li><strong>Déšť</strong> - za ty dva týdny to hodněkrát vypadalo na déšť, AccuWeather hlásil bouřku na každý den. A pršelo 2× a bouřka nebyla ani jedna. Takže se neděste deště a nerušte si program. Ale pro jistotu si vezměte do batohu větrovku.</li>
</ul>
]]></content>
        </entry>
    </feed>